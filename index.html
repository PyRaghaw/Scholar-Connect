<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Scholar Connect</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
<style>
    * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
    }
    
    :root {
        /* Light Mode Colors */
        --primary: #60697A;
        --primary-light: #AAADB2;
        --primary-dark: #313C52;
        --secondary: #D6C6A2;
        --accent: #B58E31;
        --success: #6b8e7f;
        --warning: #B58E31;
        --error: #b85c5c;
        --dark: #2d3138;
        --darker: #1a1d24;
        --light: #f8f7f5;
        --gray: #7a7e88;
        --border: #e3e1dc;
        --card-shadow: 0 2px 10px rgba(96, 105, 122, 0.08);
        --hover-shadow: 0 4px 16px rgba(96, 105, 122, 0.12);
        
        /* Light Mode Specific */
        --bg-primary: #f5f3ef;
        --bg-secondary: #e8e6e1;
        --card-bg: rgba(255, 254, 252, 0.95);
        --text-primary: #2d3138;
        --text-secondary: #7a7e88;
    }

    [data-theme="dark"] {
        /* Dark Mode Colors */
        --primary: #7d8ca0;
        --primary-light: #9daab8;
        --primary-dark: #4a5c6a;
        --secondary: #d6c6a2;
        --accent: #d4a574;
        --success: #7d9a8e;
        --warning: #d4a574;
        --error: #c77878;
        --dark: #e8e6e3;
        --darker: #f5f3f0;
        --light: #1e2228;
        --gray: #a5a8b0;
        --border: #3a3f47;
        --card-shadow: 0 2px 10px rgba(0, 0, 0, 0.3);
        --hover-shadow: 0 4px 16px rgba(0, 0, 0, 0.4);
        
        /* Dark Mode Specific */
        --bg-primary: #16181c;
        --bg-secondary: #1e2228;
        --card-bg: rgba(30, 34, 40, 0.95);
        --text-primary: #e8e6e3;
        --text-secondary: #a5a8b0;
    }
    
    body {
        font-family: 'Inter', sans-serif;
        background: linear-gradient(135deg, var(--bg-primary) 0%, var(--bg-secondary) 100%);
        min-height: 100vh;
        color: var(--text-primary);
        line-height: 1.6;
        transition: background 0.3s ease, color 0.3s ease;
    }

    /* Theme Toggle Button */
    .theme-toggle {
        position: fixed;
        top: 20px;
        right: 20px;
        z-index: 1001;
        background: var(--card-bg);
        border: 1px solid var(--border);
        width: 50px;
        height: 50px;
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        cursor: pointer;
        box-shadow: var(--card-shadow);
        transition: all 0.3s ease;
        font-size: 1.3em;
    }

    .theme-toggle:hover {
        transform: scale(1.1);
        box-shadow: var(--hover-shadow);
    }

    .theme-icon {
        transition: transform 0.3s ease;
    }

    .theme-toggle:hover .theme-icon {
        transform: rotate(20deg);
    }

    .glass-container {
        max-width: 1200px;
        margin: 40px auto;
        background: var(--card-bg);
        border-radius: 16px;
        padding: 40px;
        box-shadow: var(--card-shadow);
        border: 1px solid var(--border);
        transition: background 0.3s ease, border 0.3s ease;
    }

    .header {
        text-align: center;
        margin-bottom: 40px;
    }
    
    .logo {
        display: flex;
        align-items: center;
        justify-content: center;
        gap: 12px;
        margin-bottom: 16px;
    }
    
    .logo-icon {
        width: 50px;
        height: 50px;
        background: linear-gradient(135deg, var(--primary) 0%, var(--primary-dark) 100%);
        border-radius: 12px;
        display: flex;
        align-items: center;
        justify-content: center;
        color: white;
        font-size: 1.5em;
        box-shadow: 0 4px 12px rgba(96, 105, 122, 0.25);
        transition: background 0.3s ease;
    }
    
    h1 {
        color: var(--text-primary);
        font-size: 2.5em;
        margin-bottom: 12px;
        font-weight: 600;
        transition: color 0.3s ease;
    }
    
    .subtitle {
        color: var(--text-secondary);
        font-size: 1.1em;
        max-width: 600px;
        margin: 0 auto;
        transition: color 0.3s ease;
    }

    .tabs-container {
        margin-bottom: 40px;
    }

    .tabs {
        display: flex;
        gap: 8px;
        margin-bottom: 30px;
        background: var(--light);
        padding: 8px;
        border-radius: 12px;
        flex-wrap: wrap;
        border: 1px solid var(--border);
        transition: all 0.3s ease;
    }
    
    .tab-btn {
        padding: 14px 22px;
        background: transparent;
        border: none;
        cursor: pointer;
        font-size: 0.95em;
        color: var(--text-secondary);
        border-radius: 10px;
        transition: all 0.3s ease;
        font-weight: 500;
        display: flex;
        align-items: center;
        gap: 8px;
        flex: 1;
        justify-content: center;
        min-width: 170px;
    }
    
    .tab-btn.active {
        background: var(--card-bg);
        color: var(--primary);
        box-shadow: 0 2px 8px rgba(96, 105, 122, 0.15);
    }
    
    .tab-btn:hover:not(.active) {
        background: rgba(96, 105, 122, 0.08);
        color: var(--primary);
    }
    
    .tab-content {
        display: none;
        animation: fadeIn 0.4s ease;
    }
    
    .tab-content.active {
        display: block;
    }

    @keyframes fadeIn {
        from { opacity: 0; transform: translateY(8px); }
        to { opacity: 1; transform: translateY(0); }
    }

    .upload-card {
        background: var(--card-bg);
        border-radius: 14px;
        padding: 50px;
        text-align: center;
        transition: all 0.3s ease;
        box-shadow: var(--card-shadow);
        border: 2px dashed var(--border);
        cursor: pointer;
    }
    
    .upload-card:hover {
        transform: translateY(-4px);
        box-shadow: var(--hover-shadow);
        border-color: var(--accent);
        background: var(--light);
    }
    
    .upload-icon {
        font-size: 4em;
        margin-bottom: 18px;
        color: var(--accent);
        opacity: 0.75;
        transition: color 0.3s ease;
    }
    
    .upload-text {
        font-size: 1.3em;
        color: var(--text-primary);
        margin-bottom: 10px;
        font-weight: 600;
        transition: color 0.3s ease;
    }
    
    .upload-subtext {
        color: var(--text-secondary);
        font-size: 0.95em;
        margin-bottom: 25px;
        transition: color 0.3s ease;
    }

    .upload-features {
        display: flex;
        justify-content: center;
        gap: 25px;
        margin-top: 25px;
        flex-wrap: wrap;
    }

    .upload-feature {
        display: flex;
        align-items: center;
        gap: 8px;
        font-size: 0.85em;
        color: var(--text-secondary);
        background: var(--light);
        padding: 8px 14px;
        border-radius: 20px;
        transition: all 0.3s ease;
    }

    .feature-icon {
        color: var(--accent);
    }
    
    input[type="file"] {
        display: none;
    }

    .form-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
        gap: 20px;
        margin-bottom: 28px;
    }
    
    .form-group {
        display: flex;
        flex-direction: column;
    }
    
    label {
        font-weight: 600;
        color: var(--text-primary);
        margin-bottom: 8px;
        font-size: 0.9em;
        display: flex;
        align-items: center;
        gap: 6px;
        transition: color 0.3s ease;
    }
    
    .input-icon {
        color: var(--accent);
    }
    
    input, select, textarea {
        padding: 13px 16px;
        border: 1px solid var(--border);
        border-radius: 10px;
        font-size: 0.95em;
        transition: all 0.3s;
        background: var(--card-bg);
        font-family: 'Inter', sans-serif;
        color: var(--text-primary);
    }
    
    input:focus, select:focus, textarea:focus {
        outline: none;
        border-color: var(--primary);
        box-shadow: 0 0 0 3px rgba(96, 105, 122, 0.1);
    }

    textarea {
        min-height: 120px;
        resize: vertical;
    }

    .btn {
        padding: 14px 32px;
        border: none;
        border-radius: 10px;
        font-size: 1em;
        font-weight: 600;
        cursor: pointer;
        transition: all 0.3s;
        display: inline-flex;
        align-items: center;
        justify-content: center;
        gap: 8px;
        font-family: 'Inter', sans-serif;
    }
    
    .btn-primary {
        background: linear-gradient(135deg, var(--primary) 0%, var(--primary-dark) 100%);
        color: white;
        box-shadow: 0 2px 10px rgba(96, 105, 122, 0.25);
    }
    
    .btn-primary:hover {
        background: linear-gradient(135deg, var(--primary-dark) 0%, #2a3444 100%);
        transform: translateY(-2px);
        box-shadow: 0 4px 16px rgba(96, 105, 122, 0.3);
    }
    
    .btn-block {
        width: 100%;
    }

    .results-container {
        margin-top: 36px;
    }

    .stats-summary {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(190px, 1fr));
        gap: 18px;
        margin-bottom: 28px;
    }

    .stat-card {
        background: var(--card-bg);
        padding: 22px;
        border-radius: 12px;
        box-shadow: var(--card-shadow);
        border: 1px solid var(--border);
        text-align: center;
        transition: all 0.3s;
    }

    .stat-card:hover {
        transform: translateY(-4px);
        box-shadow: var(--hover-shadow);
    }

    .stat-card h3 {
        font-size: 2em;
        font-weight: 700;
        margin-bottom: 6px;
        background: linear-gradient(135deg, var(--primary) 0%, var(--accent) 100%);
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
        background-clip: text;
    }

    .stat-card p {
        color: var(--text-secondary);
        font-size: 0.9em;
        transition: color 0.3s ease;
    }

    .student-data-card {
        background: var(--card-bg);
        padding: 28px;
        border-radius: 14px;
        margin-bottom: 28px;
        border: 1px solid var(--border);
        box-shadow: var(--card-shadow);
        transition: all 0.3s ease;
    }

    .student-data-card h3 {
        color: var(--primary);
        margin-bottom: 18px;
        font-size: 1.2em;
        font-weight: 600;
        display: flex;
        align-items: center;
        gap: 8px;
        transition: color 0.3s ease;
    }

    .data-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(210px, 1fr));
        gap: 16px;
    }

    .data-grid p {
        margin-bottom: 8px;
        font-size: 1em;
        padding: 10px 14px;
        background: var(--light);
        border-radius: 8px;
        border: 1px solid var(--border);
        transition: all 0.3s ease;
        color: var(--text-primary);
    }

    .data-grid strong {
        color: var(--primary);
    }

    .scholarships-list {
        display: grid;
        gap: 22px;
    }

    .scholarship-card {
        background: var(--card-bg);
        padding: 28px;
        border-radius: 14px;
        box-shadow: var(--card-shadow);
        transition: all 0.3s;
        border: 1px solid var(--border);
    }
    
    .scholarship-card:hover {
        transform: translateY(-4px);
        box-shadow: var(--hover-shadow);
        border-color: var(--accent);
    }

    .scholarship-header {
        display: flex;
        justify-content: space-between;
        align-items: start;
        margin-bottom: 18px;
        gap: 18px;
    }
    
    .scholarship-header h3 {
        font-size: 1.3em;
        font-weight: 700;
        flex: 1;
        color: var(--text-primary);
        transition: color 0.3s ease;
    }
    
    .amount {
        background: linear-gradient(135deg, var(--accent) 0%, #9d7828 100%);
        color: white;
        padding: 10px 18px;
        border-radius: 20px;
        font-size: 1.2em;
        font-weight: 700;
        box-shadow: 0 2px 10px rgba(181, 142, 49, 0.3);
        white-space: nowrap;
    }
    
    .description {
        margin-bottom: 22px;
        color: var(--text-secondary);
        line-height: 1.6;
        transition: color 0.3s ease;
    }
    
    .scholarship-details {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(170px, 1fr));
        gap: 12px;
        margin-bottom: 18px;
    }
    
    .scholarship-details span {
        background: var(--light);
        padding: 10px 14px;
        border-radius: 8px;
        font-size: 0.85em;
        border: 1px solid var(--border);
        text-align: center;
        color: var(--text-primary);
        transition: all 0.3s ease;
    }

    .scholarship-details strong {
        color: var(--primary);
    }

    .apply-btn {
        margin-top: 18px;
        display: inline-flex;
        align-items: center;
        gap: 8px;
        background: linear-gradient(135deg, var(--primary) 0%, var(--primary-dark) 100%);
        color: white;
        padding: 12px 24px;
        border-radius: 10px;
        text-decoration: none;
        font-weight: 600;
        transition: all 0.3s;
        box-shadow: 0 2px 10px rgba(96, 105, 122, 0.25);
    }

    .apply-btn:hover {
        background: linear-gradient(135deg, var(--primary-dark) 0%, #2a3444 100%);
        transform: translateY(-2px);
        box-shadow: 0 4px 16px rgba(96, 105, 122, 0.3);
    }

    .exam-card {
        background: var(--card-bg);
        padding: 22px;
        border-radius: 12px;
        box-shadow: var(--card-shadow);
        border: 1px solid var(--border);
        margin-bottom: 18px;
        transition: all 0.3s;
    }

    .exam-card:hover {
        transform: translateY(-4px);
        box-shadow: var(--hover-shadow);
    }

    .exam-card h3 {
        color: var(--primary);
        margin-bottom: 12px;
        font-size: 1.2em;
        font-weight: 600;
        transition: color 0.3s ease;
    }

    .exam-card p {
        color: var(--text-secondary);
        margin-bottom: 8px;
        transition: color 0.3s ease;
    }

    .exam-card strong {
        color: var(--primary);
    }

    .loading {
        text-align: center;
        padding: 45px;
        font-size: 1.1em;
        color: var(--primary);
        transition: color 0.3s ease;
    }
    
    .spinner {
        border: 3px solid var(--border);
        border-top: 3px solid var(--accent);
        border-radius: 50%;
        width: 50px;
        height: 50px;
        animation: spin 1s linear infinite;
        margin: 18px auto;
    }
    
    @keyframes spin {
        0% { transform: rotate(0deg); }
        100% { transform: rotate(360deg); }
    }
    
    .error-message {
        padding: 18px;
        border-radius: 12px;
        margin: 18px 0;
        background: rgba(184, 92, 92, 0.1);
        color: var(--error);
        border: 1px solid rgba(184, 92, 92, 0.2);
        display: flex;
        align-items: center;
        gap: 10px;
        transition: all 0.3s ease;
    }

    .no-results {
        text-align: center;
        padding: 70px 35px;
        background: var(--card-bg);
        border-radius: 14px;
        border: 1px solid var(--border);
        font-size: 1.1em;
        color: var(--text-secondary);
        box-shadow: var(--card-shadow);
        transition: all 0.3s ease;
    }

    .no-results i {
        font-size: 3em;
        color: var(--accent);
        opacity: 0.5;
        margin-bottom: 18px;
    }

    .guidance-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(260px, 1fr));
        gap: 18px;
    }

    .guidance-card {
        background: var(--card-bg);
        padding: 22px;
        border-radius: 12px;
        box-shadow: var(--card-shadow);
        border: 1px solid var(--border);
        transition: all 0.3s;
        cursor: pointer;
    }

    .guidance-card:hover {
        transform: translateY(-4px);
        box-shadow: var(--hover-shadow);
        border-color: var(--accent);
    }

    .guidance-card h5 {
        color: var(--primary);
        margin-bottom: 10px;
        font-size: 1.05em;
        font-weight: 600;
        transition: color 0.3s ease;
    }

    .guidance-card p {
        color: var(--text-secondary);
        font-size: 0.9em;
        line-height: 1.5;
        transition: color 0.3s ease;
    }

    .chatbot-widget {
        position: fixed;
        bottom: 30px;
        right: 30px;
        z-index: 1000;
    }

    .chatbot-button {
        width: 60px;
        height: 60px;
        border-radius: 50%;
        background: linear-gradient(135deg, var(--primary) 0%, var(--primary-dark) 100%);
        color: white;
        border: none;
        cursor: pointer;
        box-shadow: 0 4px 16px rgba(96, 105, 122, 0.35);
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 1.5em;
        transition: all 0.3s;
    }

    .chatbot-button:hover {
        transform: scale(1.08);
        box-shadow: 0 6px 20px rgba(96, 105, 122, 0.45);
    }

    /* ===== CRAZY PREMIUM EFFECTS ===== */

/* 1. Animated Gradient Background */
body::before {
    content: '';
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: linear-gradient(45deg, 
        var(--bg-primary), 
        var(--bg-secondary), 
        var(--secondary), 
        var(--bg-primary));
    background-size: 400% 400%;
    animation: gradientFlow 15s ease infinite;
    z-index: -1;
    opacity: 0.3;
}

@keyframes gradientFlow {
    0% { background-position: 0% 50%; }
    50% { background-position: 100% 50%; }
    100% { background-position: 0% 50%; }
}

/* 2. Floating Particles Canvas */
#particles-canvas {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    z-index: -1;
    pointer-events: none;
    opacity: 0.4;
}

[data-theme="dark"] #particles-canvas {
    opacity: 0.2;
}

/* 3. Smooth Scroll Animations */
.fade-in {
    opacity: 0;
    transform: translateY(30px);
    animation: fadeInUp 0.8s ease forwards;
}

@keyframes fadeInUp {
    to {
        opacity: 1;
        transform: translateY(0);
    }
}

.slide-in-left {
    opacity: 0;
    transform: translateX(-50px);
    animation: slideInLeft 0.8s ease forwards;
}

@keyframes slideInLeft {
    to {
        opacity: 1;
        transform: translateX(0);
    }
}

.slide-in-right {
    opacity: 0;
    transform: translateX(50px);
    animation: slideInRight 0.8s ease forwards;
}

@keyframes slideInRight {
    to {
        opacity: 1;
        transform: translateX(0);
    }
}

/* 4. 3D Card Tilt Effect */
.scholarship-card,
.exam-card,
.stat-card,
.guidance-card {
    transform-style: preserve-3d;
    transition: transform 0.3s ease;
}

.scholarship-card:hover,
.exam-card:hover,
.stat-card:hover,
.guidance-card:hover {
    transform: perspective(1000px) rotateX(2deg) rotateY(2deg) translateY(-8px);
}

/* 5. Custom Cursor Trail */
.cursor-dot {
    width: 8px;
    height: 8px;
    background: var(--accent);
    border-radius: 50%;
    position: fixed;
    pointer-events: none;
    z-index: 9999;
    transition: transform 0.15s ease;
    opacity: 0;
}

.cursor-dot.active {
    opacity: 1;
}

.cursor-outline {
    width: 40px;
    height: 40px;
    border: 2px solid var(--accent);
    border-radius: 50%;
    position: fixed;
    pointer-events: none;
    z-index: 9999;
    transition: transform 0.2s ease, width 0.2s, height 0.2s;
    opacity: 0.5;
}

/* 6. Ripple Effect on Click */
.ripple {
    position: absolute;
    border-radius: 50%;
    background: rgba(181, 142, 49, 0.5);
    transform: scale(0);
    animation: rippleEffect 0.6s ease-out;
    pointer-events: none;
}

@keyframes rippleEffect {
    to {
        transform: scale(4);
        opacity: 0;
    }
}

/* 7. Glowing Button Effect */
.btn-primary {
    position: relative;
    overflow: hidden;
}

.btn-primary::before {
    content: '';
    position: absolute;
    top: 50%;
    left: 50%;
    width: 0;
    height: 0;
    border-radius: 50%;
    background: rgba(255, 255, 255, 0.3);
    transform: translate(-50%, -50%);
    transition: width 0.6s, height 0.6s;
}

.btn-primary:hover::before {
    width: 300px;
    height: 300px;
}

/* 8. Smooth Page Load Animation */
.glass-container {
    animation: pageLoad 0.8s ease;
}

@keyframes pageLoad {
    from {
        opacity: 0;
        transform: scale(0.95);
    }
    to {
        opacity: 1;
        transform: scale(1);
    }
}

/* 9. Parallax Effect on Scroll */
.parallax-section {
    position: relative;
    background-attachment: fixed;
    background-position: center;
    background-repeat: no-repeat;
    background-size: cover;
}

/* 10. Floating Animation for Icons */
.logo-icon,
.upload-icon {
    animation: floatAnimation 3s ease-in-out infinite;
}

@keyframes floatAnimation {
    0%, 100% { transform: translateY(0px); }
    50% { transform: translateY(-10px); }
}

/* 11. Text Gradient Effect */
h1 {
    background: linear-gradient(135deg, var(--primary) 0%, var(--accent) 100%);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
}

/* 12. Skeleton Loading Animation */
@keyframes shimmer {
    0% { background-position: -1000px 0; }
    100% { background-position: 1000px 0; }
}

.skeleton {
    background: linear-gradient(90deg, var(--light) 25%, var(--border) 50%, var(--light) 75%);
    background-size: 1000px 100%;
    animation: shimmer 2s infinite;
}

/* 13. Stagger Animation for Lists */
.scholarship-card:nth-child(1) { animation-delay: 0.1s; }
.scholarship-card:nth-child(2) { animation-delay: 0.2s; }
.scholarship-card:nth-child(3) { animation-delay: 0.3s; }
.scholarship-card:nth-child(4) { animation-delay: 0.4s; }
.scholarship-card:nth-child(5) { animation-delay: 0.5s; }

/* Mobile Optimizations */
@media (max-width: 768px) {
    .cursor-dot,
    .cursor-outline {
        display: none;
    }
    
    body::before {
        animation-duration: 20s;
    }
}


    .chatbot-container {
        position: absolute;
        bottom: 80px;
        right: 0;
        width: 360px;
        height: 550px;
        background: var(--card-bg);
        border-radius: 16px;
        box-shadow: 0 12px 32px rgba(0, 0, 0, 0.15);
        display: none;
        flex-direction: column;
        overflow: hidden;
        border: 1px solid var(--border);
        transition: all 0.3s ease;
    }

    .chatbot-container.active {
        display: flex;
        animation: slideUp 0.3s ease;
    }

    @keyframes slideUp {
        from {
            opacity: 0;
            transform: translateY(15px);
        }
        to {
            opacity: 1;
            transform: translateY(0);
        }
    }

    .chatbot-header {
        background: linear-gradient(135deg, var(--primary) 0%, var(--primary-dark) 100%);
        color: white;
        padding: 18px;
        display: flex;
        justify-content: space-between;
        align-items: center;
    }

    .chatbot-header h4 {
        margin: 0;
        font-size: 1.1em;
        font-weight: 600;
        display: flex;
        align-items: center;
        gap: 8px;
    }

    .chatbot-close {
        background: rgba(255, 255, 255, 0.2);
        border: none;
        color: white;
        width: 30px;
        height: 30px;
        border-radius: 50%;
        cursor: pointer;
        display: flex;
        align-items: center;
        justify-content: center;
        transition: all 0.3s;
        font-size: 1.1em;
    }

    .chatbot-close:hover {
        background: rgba(255, 255, 255, 0.3);
    }

    .chatbot-messages {
        flex: 1;
        padding: 18px;
        overflow-y: auto;
        background: var(--light);
        display: flex;
        flex-direction: column;
        gap: 12px;
        transition: background 0.3s ease;
    }

    .chatbot-message {
        max-width: 75%;
        padding: 11px 14px;
        border-radius: 14px;
        word-wrap: break-word;
        line-height: 1.5;
        transition: all 0.3s ease;
    }

    .chatbot-message.user {
        background: linear-gradient(135deg, var(--primary) 0%, var(--primary-dark) 100%);
        color: white;
        align-self: flex-end;
        border-bottom-right-radius: 4px;
    }

    .chatbot-message.bot {
        background: var(--card-bg);
        color: var(--text-primary);
        align-self: flex-start;
        border-bottom-left-radius: 4px;
        box-shadow: 0 1px 4px rgba(0, 0, 0, 0.08);
        border: 1px solid var(--border);
    }

    .chatbot-input-container {
        padding: 14px;
        background: var(--card-bg);
        border-top: 1px solid var(--border);
        display: flex;
        gap: 8px;
        transition: all 0.3s ease;
    }

    .chatbot-input {
        flex: 1;
        padding: 10px 14px;
        border: 1px solid var(--border);
        border-radius: 20px;
        font-size: 0.9em;
        font-family: 'Inter', sans-serif;
        outline: none;
        color: var(--text-primary);
        background: var(--light);
        transition: all 0.3s ease;
    }

    .chatbot-input:focus {
        border-color: var(--primary);
        box-shadow: 0 0 0 3px rgba(96, 105, 122, 0.1);
    }

    .chatbot-send {
        width: 42px;
        height: 42px;
        border-radius: 50%;
        background: linear-gradient(135deg, var(--primary) 0%, var(--primary-dark) 100%);
        color: white;
        border: none;
        cursor: pointer;
        display: flex;
        align-items: center;
        justify-content: center;
        transition: all 0.3s;
        font-size: 1.1em;
    }

    .chatbot-send:hover {
        transform: scale(1.05);
    }

    .modal-overlay {
        display: none;
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: rgba(49, 60, 82, 0.5);
        z-index: 2000;
        align-items: center;
        justify-content: center;
        transition: background 0.3s ease;
    }

    [data-theme="dark"] .modal-overlay {
        background: rgba(22, 24, 28, 0.7);
    }

    .modal-overlay.active {
        display: flex;
    }

    .modal {
        background: var(--card-bg);
        border-radius: 16px;
        padding: 35px;
        max-width: 480px;
        width: 90%;
        max-height: 88vh;
        overflow-y: auto;
        box-shadow: 0 12px 32px rgba(0, 0, 0, 0.2);
        position: relative;
        border: 1px solid var(--border);
        transition: all 0.3s ease;
    }

    .modal-header h3 {
        color: var(--primary);
        font-size: 1.4em;
        margin-bottom: 8px;
        font-weight: 600;
        transition: color 0.3s ease;
    }

    .modal-close {
        position: absolute;
        top: 18px;
        right: 18px;
        background: transparent;
        border: none;
        font-size: 1.4em;
        color: var(--text-secondary);
        cursor: pointer;
        transition: color 0.3s;
    }

    .modal-close:hover {
        color: var(--primary);
    }

    .exam-options {
        display: grid;
        gap: 14px;
        margin-bottom: 22px;
    }

    .exam-option {
        padding: 18px;
        border: 2px solid var(--border);
        border-radius: 10px;
        cursor: pointer;
        transition: all 0.3s;
        display: flex;
        align-items: center;
        gap: 12px;
        background: var(--card-bg);
    }

    .exam-option:hover {
        border-color: var(--accent);
        background: var(--light);
    }

    .exam-option.selected {
        border-color: var(--accent);
        background: var(--light);
    }

    .exam-option-icon {
        width: 48px;
        height: 48px;
        background: linear-gradient(135deg, var(--primary) 0%, var(--accent) 100%);
        color: white;
        border-radius: 10px;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 1.4em;
        flex-shrink: 0;
    }

    .exam-option-text h5 {
        color: var(--text-primary);
        margin-bottom: 4px;
        font-weight: 600;
        transition: color 0.3s ease;
    }

    .exam-option-text p {
        color: var(--text-secondary);
        font-size: 0.85em;
        transition: color 0.3s ease;
    }

    /* Scrollbar Styling */
    ::-webkit-scrollbar {
        width: 8px;
        height: 8px;
    }

    ::-webkit-scrollbar-track {
        background: var(--light);
    }

    ::-webkit-scrollbar-thumb {
        background: var(--primary-light);
        border-radius: 4px;
    }

    ::-webkit-scrollbar-thumb:hover {
        background: var(--primary);
    }

    @media (max-width: 768px) {
        .glass-container {
            padding: 28px 18px;
            margin: 20px 14px;
        }
        
        .theme-toggle {
            top: 15px;
            right: 15px;
            width: 45px;
            height: 45px;
        }

        h1 {
            font-size: 2em;
        }

        .tabs {
            flex-direction: column;
        }

        .tab-btn {
            width: 100%;
            min-width: auto;
        }

        .chatbot-widget {
            bottom: 20px;
            right: 20px;
        }

        .chatbot-container {
            width: calc(100vw - 36px);
            height: calc(100vh - 100px);
            right: 18px;
            bottom: 70px;
        }

        .form-grid {
            grid-template-columns: 1fr;
        }

        .scholarship-header {
            flex-direction: column;
            gap: 12px;
        }

        .scholarship-details {
            grid-template-columns: 1fr;
        }

        .upload-features {
            flex-direction: column;
            align-items: stretch;
        }
    }
</style>
</head>
<body>
    <!-- Main Container -->
    <div class="glass-container">
        <div class="header">
            <div class="logo">
                <div class="logo-icon">
                    <i class="fas fa-graduation-cap"></i>
                </div>
            </div>
            <h1>Find Your Perfect Scholarship</h1>
            <p class="subtitle">AI-powered platform to discover scholarships that match your profile and aspirations</p>
        </div>

        <div class="tabs-container">
            <!-- Tab Buttons -->
            <div class="tabs">
                <button class="tab-btn active" data-tab="document">
                    <i class="fas fa-file-upload"></i> Document Scan
                </button>
                <button class="tab-btn" data-tab="manual">
                    <i class="fas fa-user-edit"></i> Manual Entry
                </button>
                <button class="tab-btn" data-tab="exam">
                    <i class="fas fa-book-open"></i> Exam Information
                </button>
                <button class="tab-btn" data-tab="guidance">
                    <i class="fas fa-hands-helping"></i> Application Guidance
                </button>
            </div>

            <!-- Tab Contents -->
            <div id="document-tab" class="tab-content active">
                <div class="upload-card" onclick="document.getElementById('document-upload').click()">
                    <div class="upload-icon">
                        <i class="fas fa-cloud-upload-alt"></i>
                    </div>
                    <div class="upload-text">Upload Your Academic Documents</div>
                    <div class="upload-subtext">Drag & drop or click to upload marksheets, income certificates, or ID proofs</div>
                    <div class="upload-features">
                        <div class="upload-feature">
                            <i class="fas fa-shield-alt feature-icon"></i>
                            <span>Secure & Private</span>
                        </div>
                        <div class="upload-feature">
                            <i class="fas fa-bolt feature-icon"></i>
                            <span>Instant Processing</span>
                        </div>
                        <div class="upload-feature">
                            <i class="fas fa-robot feature-icon"></i>
                            <span>AI-Powered Analysis</span>
                        </div>
                    </div>
                    <input type="file" id="document-upload" accept="image/*,.pdf">
                </div>
            </div>

            <div id="manual-tab" class="tab-content">
                <div class="form-grid">
                    <div class="form-group">
                        <label for="name">
                            <i class="fas fa-user input-icon"></i> Full Name
                        </label>
                        <input type="text" id="name" placeholder="Enter your full name">
                    </div>
                    <div class="form-group">
                        <label for="percentage">
                            <i class="fas fa-chart-line input-icon"></i> Academic Percentage
                        </label>
                        <input type="number" id="percentage" placeholder="85.5" step="0.01" min="0" max="100">
                    </div>
                    <div class="form-group">
                        <label for="income">
                            <i class="fas fa-rupee-sign input-icon"></i> Annual Family Income (‚Çπ)
                        </label>
                        <input type="number" id="income" placeholder="180000">
                    </div>
                    <div class="form-group">
                        <label for="category">
                            <i class="fas fa-tag input-icon"></i> Category
                        </label>
<select id="category">
    <option value="">Select Category</option>
    <option value="General">General</option>
    <option value="OBC">OBC (Non-Creamy Layer)</option>
    <option value="SC">SC (Scheduled Caste)</option>
    <option value="ST">ST (Scheduled Tribe)</option>
    <option value="Minority">Minority (Muslim/Christian/Sikh/etc)</option>
    <option value="EWS">EWS (Economically Weaker Section)</option>
</select>
                    </div>
                    <div class="form-group">
                        <label for="stream">
                            <i class="fas fa-graduation-cap input-icon"></i> Education Stream
                        </label>
                        <select id="stream">
    <option value="">Select Stream</option>
    <option value="All">All Streams</option>
    <option value="Science">Science (PCM/PCB)</option>
    <option value="Commerce">Commerce</option>
    <option value="Arts">Arts/Humanities</option>
    <option value="Engineering">Engineering</option>
    <option value="Medical">Medical</option>
    <option value="Pharmacy">Pharmacy</option>
    <option value="Management">Management</option>
    <option value="Law">Law</option>
</select>
                    </div>
                    <div class="form-group">
                        <label for="state">
                            <i class="fas fa-map-marker-alt input-icon"></i> State of Residence
                        </label>
                        <select id="state">
    <option value="">Select State</option>
    <option value="West Bengal">West Bengal</option>
    <option value="Andhra Pradesh">Andhra Pradesh</option>
    <option value="Arunachal Pradesh">Arunachal Pradesh</option>
    <option value="Assam">Assam</option>
    <option value="Bihar">Bihar</option>
    <option value="Chhattisgarh">Chhattisgarh</option>
    <option value="Delhi">Delhi</option>
    <option value="Goa">Goa</option>
    <option value="Gujarat">Gujarat</option>
    <option value="Haryana">Haryana</option>
    <option value="Himachal Pradesh">Himachal Pradesh</option>
    <option value="Jharkhand">Jharkhand</option>
    <option value="Karnataka">Karnataka</option>
    <option value="Kerala">Kerala</option>
    <option value="Madhya Pradesh">Madhya Pradesh</option>
    <option value="Maharashtra">Maharashtra</option>
    <option value="Manipur">Manipur</option>
    <option value="Meghalaya">Meghalaya</option>
    <option value="Mizoram">Mizoram</option>
    <option value="Nagaland">Nagaland</option>
    <option value="Odisha">Odisha</option>
    <option value="Punjab">Punjab</option>
    <option value="Rajasthan">Rajasthan</option>
    <option value="Sikkim">Sikkim</option>
    <option value="Tamil Nadu">Tamil Nadu</option>
    <option value="Telangana">Telangana</option>
    <option value="Tripura">Tripura</option>
    <option value="Uttar Pradesh">Uttar Pradesh</option>
    <option value="Uttarakhand">Uttarakhand</option>
</select>
                    </div>
                </div>
                <button class="btn btn-primary btn-block" id="manual-submit-btn">
                    <i class="fas fa-search"></i> Find Matching Scholarships
                </button>
            </div>

            <div id="exam-tab" class="tab-content">
                <div id="exams-content"></div>
            </div>

            <div id="guidance-tab" class="tab-content">
                <div class="student-data-card">
                    <h3><i class="fas fa-road"></i> Application Guidance</h3>
                    <p>Select the type of guidance you need:</p>
                    <div class="form-group" style="margin-top: 20px;">
                        <select id="guidance-type" style="width: 100%; max-width: 400px;">
                            <option value="">Select Guidance Type</option>
                            <option value="scholarship">Scholarship Application Process</option>
                            <option value="exam">Exam Preparation Strategy</option>
                            <option value="documents">Required Documents Checklist</option>
                            <option value="interview">Interview Preparation</option>
                        </select>
                    </div>
                    <div id="guidance-content" style="margin-top: 30px;"></div>
                </div>
            </div>
        </div>

        <!-- Results Section -->
        <div id="results"></div>
    </div>

    <!-- Particles Canvas -->
<canvas id="particles-canvas"></canvas>

<!-- Custom Cursor Elements -->
<div class="cursor-dot"></div>
<div class="cursor-outline"></div>


    <!-- Chatbot Widget -->
    <div class="chatbot-widget">
        <button class="chatbot-button" id="chatbot-toggle">
            <i class="fas fa-comments"></i>
        </button>
        <div class="chatbot-container" id="chatbot-container">
            <div class="chatbot-header">
                <h4><i class="fas fa-robot"></i> Study Assistant</h4>
                <button class="chatbot-close" id="chatbot-close">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="chatbot-messages" id="chatbot-messages">
                <div class="chatbot-message bot">
                    üëã Hi! I'm your study assistant. I can help you with:
                    <br><br>
                    ‚Ä¢ Scholarship information<br>
                    ‚Ä¢ Exam preparation tips<br>
                    ‚Ä¢ Document requirements<br>
                    ‚Ä¢ Application guidance<br><br>
                    How can I help you today?
                </div>
            </div>
            <div class="chatbot-input-container">
                <input type="text" class="chatbot-input" id="chatbot-input" placeholder="Type your message...">
                <button class="chatbot-send" id="chatbot-send">
                    <i class="fas fa-paper-plane"></i>
                </button>
            </div>
        </div>
    </div>

    <button class="theme-toggle" id="theme-toggle" aria-label="Toggle theme">
    <span class="theme-icon">üåô</span>
</button>

    <!-- Exam Selection Modal -->
    <div class="modal-overlay" id="exam-modal">
        <div class="modal">
            <button class="modal-close" id="modal-close">
                <i class="fas fa-times"></i>
            </button>
            <div class="modal-header">
                <h3 id="modal-title">Select Your Exam</h3>
                <p id="modal-subtitle">Choose the exam you're preparing for</p>
            </div>
            <div class="exam-options" id="exam-options">
                <!-- Will be populated by JavaScript -->
            </div>
            <button class="btn btn-primary btn-block" id="generate-plan-btn" style="display: none;">
                <i class="fas fa-magic"></i> Generate Study Plan
            </button>
            <div id="study-plan-result"></div>
        </div>
    </div>

    <script>
        const API_URL = 'http://localhost:5000';
        let currentTab = 'document';  // Default tab
        let currentLanguage = 'en';

        // Initialize on page load
        document.addEventListener('DOMContentLoaded', function() {
            console.log('Page loaded, initializing...');
            
            // Set default active tab
            switchTab('document');
            
            // Load initial data
            loadDashboardStats();
            
            // Attach event listeners
            attachEventListeners();
        });

        // Attach event listeners
        function attachEventListeners() {
            // Tab buttons
            document.querySelectorAll('.tab-btn').forEach(btn => {
                btn.addEventListener('click', function() {
                    const tabName = this.getAttribute('data-tab');
                    switchTab(tabName);
                });
            });
            
            // File upload
            const fileInput = document.getElementById('document-upload');
            if (fileInput) {
                fileInput.addEventListener('change', handleDocumentUpload);
            }
            
            // Manual submit button
            const manualBtn = document.getElementById('manual-submit-btn');
            if (manualBtn) {
                manualBtn.addEventListener('click', handleManualSubmit);
            }
            
            // Guidance type selector
            const guidanceSelect = document.getElementById('guidance-type');
            if (guidanceSelect) {
                guidanceSelect.addEventListener('change', function() {
                    loadGuidance(this.value);
                });
            }
            
            // Drag and drop for upload zone
            const uploadCard = document.querySelector('.upload-card');
            if (uploadCard) {
                uploadCard.addEventListener('dragover', function(e) {
                    e.preventDefault();
                    this.classList.add('dragover');
                });
                
                uploadCard.addEventListener('dragleave', function() {
                    this.classList.remove('dragover');
                });
                
                uploadCard.addEventListener('drop', function(e) {
                    e.preventDefault();
                    this.classList.remove('dragover');
                    const files = e.dataTransfer.files;
                    if (files.length > 0) {
                        document.getElementById('document-upload').files = files;
                        handleDocumentUpload({ target: { files: files } });
                    }
                });
            }
        }

        // Tab Switching Function
        function switchTab(tabName) {
            console.log('Switching to tab:', tabName);
            
            // Remove active class from all tabs
            document.querySelectorAll('.tab-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            
            // Hide all tab contents
            document.querySelectorAll('.tab-content').forEach(content => {
                content.classList.remove('active');
            });
            
            // Add active class to clicked tab
            const activeButton = document.querySelector(`[data-tab="${tabName}"]`);
            if (activeButton) {
                activeButton.classList.add('active');
            }
            
            // Show selected tab content
            const activeContent = document.getElementById(`${tabName}-tab`);
            if (activeContent) {
                activeContent.classList.add('active');
            }
            
            currentTab = tabName;
            
            // Load tab-specific data
            if (tabName === 'exam') {
                loadExams();
            } else if (tabName === 'guidance') {
                // Guidance loads on demand
            }
        }

        // Load Dashboard Statistics
        async function loadDashboardStats() {
            try {
                // This would typically fetch from your API
                // For demo purposes, we'll use mock data
                const mockStats = {
                    total_scholarships: 15234,
                    total_amount: 1250000000,
                    urgent_deadlines: 23
                };
                
                updateDashboardCards(mockStats);
            } catch (error) {
                console.error('Dashboard stats error:', error);
            }
        }

        function updateDashboardCards(stats) {
            // Update if dashboard elements exist
            // This is just a placeholder for when we add a dashboard
            console.log('Dashboard stats:', stats);
        }

        // Generate Study Plan - COMPLETELY FRONTEND (NO BACKEND NEEDED)
async function generateStudyPlan(exam, strategy) {
    const resultDiv = document.getElementById('study-plan-result');
    resultDiv.innerHTML = '<div class="loading">Generating your personalized study plan...</div>';
    
    // Simulate processing delay for better UX
    setTimeout(() => {
        const studyPlans = {
            'study-plan': {
                title: 'üìö Complete Study Plan',
                content: generateStudyPlanContent(exam)
            },
            'practice': {
                title: '‚úçÔ∏è Practice Schedule',
                content: generatePracticeContent(exam)
            },
            'weak-areas': {
                title: 'üéØ Weak Areas Strategy',
                content: generateWeakAreasContent(exam)
            },
            'revision': {
                title: 'üîÑ Revision Strategy',
                content: generateRevisionContent(exam)
            },
            'time-management': {
                title: '‚è∞ Time Management',
                content: generateTimeManagementContent(exam)
            },
            'stress-management': {
                title: 'üßò Stress Management',
                content: generateStressManagementContent(exam)
            }
        };
        
        const plan = studyPlans[strategy] || studyPlans['study-plan'];
        
        resultDiv.innerHTML = `
            <div style="background: white; padding: 30px; border-radius: 16px; box-shadow: var(--card-shadow);">
                <h3 style="color: var(--primary); margin-bottom: 20px; display: flex; align-items: center; gap: 10px;">
                    ${plan.title} - ${exam.name}
                </h3>
                ${plan.content}
                <div style="margin-top: 30px; padding: 20px; background: rgba(108, 99, 255, 0.1); border-radius: 12px; border-left: 4px solid var(--primary);">
                    <p style="margin: 0; color: var(--dark);"><strong>üí° Pro Tip:</strong> Stay consistent with your study schedule. Regular small efforts yield better results than last-minute cramming!</p>
                </div>
                <div style="margin-top: 20px; display: flex; gap: 10px;">
                    <button onclick="window.print()" style="padding: 12px 24px; background: var(--primary); color: white; border: none; border-radius: 8px; cursor: pointer; font-weight: 500;">
                        <i class="fas fa-print"></i> Print Plan
                    </button>
                    <button onclick="downloadStudyPlan('${exam.name}', '${strategy}')" style="padding: 12px 24px; background: var(--success); color: white; border: none; border-radius: 8px; cursor: pointer; font-weight: 500;">
                        <i class="fas fa-download"></i> Download PDF
                    </button>
                </div>
            </div>
        `;
    }, 1000);
}

// Study Plan Content Generator
function generateStudyPlanContent(exam) {
    return `
        <div class="study-timeline" style="margin: 20px 0;">
            <div class="timeline-item" style="margin-bottom: 25px; padding: 20px; background: rgba(108, 99, 255, 0.05); border-radius: 12px; border-left: 4px solid var(--primary);">
                <h4 style="color: var(--primary); margin-bottom: 10px;">üìÖ Month 1-2: Foundation Building</h4>
                <ul style="line-height: 2; color: var(--dark); margin-left: 20px;">
                    <li><strong>Week 1-2:</strong> Complete syllabus review and topic identification</li>
                    <li><strong>Week 3-4:</strong> Start with basic concepts of each subject</li>
                    <li><strong>Week 5-6:</strong> Solve NCERT/basic problems</li>
                    <li><strong>Week 7-8:</strong> First revision of completed topics</li>
                </ul>
                <div style="background: white; padding: 15px; border-radius: 8px; margin-top: 15px;">
                    <p style="margin: 0; color: var(--dark);"><strong>Daily Schedule:</strong> 6-8 hours study | 3 subjects rotation | 1 hour revision</p>
                </div>
            </div>
            
            <div class="timeline-item" style="margin-bottom: 25px; padding: 20px; background: rgba(255, 101, 132, 0.05); border-radius: 12px; border-left: 4px solid var(--secondary);">
                <h4 style="color: var(--secondary); margin-bottom: 10px;">üìà Month 3-4: Concept Strengthening</h4>
                <ul style="line-height: 2; color: var(--dark); margin-left: 20px;">
                    <li><strong>Week 9-10:</strong> Advanced problem solving</li>
                    <li><strong>Week 11-12:</strong> Previous year questions (topic-wise)</li>
                    <li><strong>Week 13-14:</strong> Mock tests (chapter-wise)</li>
                    <li><strong>Week 15-16:</strong> Identify and work on weak areas</li>
                </ul>
                <div style="background: white; padding: 15px; border-radius: 8px; margin-top: 15px;">
                    <p style="margin: 0; color: var(--dark);"><strong>Daily Schedule:</strong> 8-10 hours study | Focus on problem-solving | 2 mock tests/week</p>
                </div>
            </div>
            
            <div class="timeline-item" style="margin-bottom: 25px; padding: 20px; background: rgba(54, 209, 220, 0.05); border-radius: 12px; border-left: 4px solid var(--accent);">
                <h4 style="color: var(--accent); margin-bottom: 10px;">üéØ Month 5-6: Advanced Practice</h4>
                <ul style="line-height: 2; color: var(--dark); margin-left: 20px;">
                    <li><strong>Week 17-18:</strong> Full-length mock tests (weekly)</li>
                    <li><strong>Week 19-20:</strong> Previous year papers (full syllabus)</li>
                    <li><strong>Week 21-22:</strong> Speed and accuracy improvement</li>
                    <li><strong>Week 23-24:</strong> Final revision and formula sheets</li>
                </ul>
                <div style="background: white; padding: 15px; border-radius: 8px; margin-top: 15px;">
                    <p style="margin: 0; color: var(--dark);"><strong>Daily Schedule:</strong> 4-6 hours focused study | Daily mock test | Error analysis</p>
                </div>
            </div>
            
            <div class="timeline-item" style="padding: 20px; background: rgba(76, 175, 80, 0.05); border-radius: 12px; border-left: 4px solid var(--success);">
                <h4 style="color: var(--success); margin-bottom: 10px;">üî• Last Month: Final Preparation</h4>
                <ul style="line-height: 2; color: var(--dark); margin-left: 20px;">
                    <li><strong>Week 25-26:</strong> Complete revision (all subjects)</li>
                    <li><strong>Week 27-28:</strong> Formula revision and quick notes</li>
                    <li><strong>Last Week:</strong> Light revision, confidence building, avoid new topics</li>
                    <li><strong>Last 2 Days:</strong> Rest well, review important formulas only</li>
                </ul>
                <div style="background: white; padding: 15px; border-radius: 8px; margin-top: 15px;">
                    <p style="margin: 0; color: var(--dark);"><strong>Daily Schedule:</strong> 3-4 hours revision | Mock test analysis | Mental preparation</p>
                </div>
            </div>
        </div>
    `;
}


// 5. Card 3D Tilt Effect
function init3DTilt() {
    const cards = document.querySelectorAll('.scholarship-card, .exam-card, .stat-card, .guidance-card');
    
    cards.forEach(card => {
        card.addEventListener('mousemove', (e) => {
            const rect = card.getBoundingClientRect();
            const x = e.clientX - rect.left;
            const y = e.clientY - rect.top;
            
            const centerX = rect.width / 2;
            const centerY = rect.height / 2;
            
            const rotateX = (y - centerY) / 20;
            const rotateY = (centerX - x) / 20;
            
            card.style.transform = `perspective(1000px) rotateX(${rotateX}deg) rotateY(${rotateY}deg) translateY(-8px)`;
        });
        
        card.addEventListener('mouseleave', () => {
            card.style.transform = 'perspective(1000px) rotateX(0) rotateY(0) translateY(0)';
        });
    });
}

// 6. Smooth Scroll
function initSmoothScroll() {
    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener('click', function (e) {
            e.preventDefault();
            const target = document.querySelector(this.getAttribute('href'));
            if (target) {
                target.scrollIntoView({
                    behavior: 'smooth',
                    block: 'start'
                });
            }
        });
    });
}

// Initialize all effects
document.addEventListener('DOMContentLoaded', () => {
    initParticles();
    initCustomCursor();
    initRippleEffect();
    initScrollReveal();
    init3DTilt();
    initSmoothScroll();
});


// Practice Content Generator
function generatePracticeContent(exam) {
    return `
        <div style="margin: 20px 0;">
            <div style="background: rgba(108, 99, 255, 0.05); padding: 20px; border-radius: 12px; margin-bottom: 20px;">
                <h4 style="color: var(--primary); margin-bottom: 15px;">üìù Daily Practice Routine</h4>
                <table style="width: 100%; border-collapse: collapse;">
                    <thead>
                        <tr style="background: var(--primary); color: white;">
                            <th style="padding: 12px; text-align: left; border-radius: 8px 0 0 0;">Time Slot</th>
                            <th style="padding: 12px; text-align: left;">Activity</th>
                            <th style="padding: 12px; text-align: left; border-radius: 0 8px 0 0;">Duration</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr style="background: white;">
                            <td style="padding: 12px; border-bottom: 1px solid var(--border);">Morning (6-9 AM)</td>
                            <td style="padding: 12px; border-bottom: 1px solid var(--border);">Solve 20-30 MCQs from previous year papers</td>
                            <td style="padding: 12px; border-bottom: 1px solid var(--border);">3 hours</td>
                        </tr>
                        <tr style="background: rgba(108, 99, 255, 0.02);">
                            <td style="padding: 12px; border-bottom: 1px solid var(--border);">Mid-day (11 AM-2 PM)</td>
                            <td style="padding: 12px; border-bottom: 1px solid var(--border);">Practice difficult numerical problems</td>
                            <td style="padding: 12px; border-bottom: 1px solid var(--border);">3 hours</td>
                        </tr>
                        <tr style="background: white;">
                            <td style="padding: 12px; border-bottom: 1px solid var(--border);">Evening (4-7 PM)</td>
                            <td style="padding: 12px; border-bottom: 1px solid var(--border);">Topic-wise practice tests</td>
                            <td style="padding: 12px; border-bottom: 1px solid var(--border);">3 hours</td>
                        </tr>
                        <tr style="background: rgba(108, 99, 255, 0.02);">
                            <td style="padding: 12px;">Night (8-10 PM)</td>
                            <td style="padding: 12px;">Review mistakes and revise weak concepts</td>
                            <td style="padding: 12px;">2 hours</td>
                        </tr>
                    </tbody>
                </table>
            </div>
            
            <div style="background: rgba(255, 101, 132, 0.05); padding: 20px; border-radius: 12px; margin-bottom: 20px;">
                <h4 style="color: var(--secondary); margin-bottom: 15px;">üìä Weekly Mock Test Schedule</h4>
                <ul style="line-height: 2; color: var(--dark); margin-left: 20px;">
                    <li><strong>Monday:</strong> Subject-wise test (Physics/Chemistry/Math)</li>
                    <li><strong>Wednesday:</strong> Mixed subject test (All 3 subjects)</li>
                    <li><strong>Friday:</strong> Previous year full paper</li>
                    <li><strong>Sunday:</strong> Full-length mock test (3 hours)</li>
                </ul>
            </div>
            
            <div style="background: rgba(76, 175, 80, 0.05); padding: 20px; border-radius: 12px;">
                <h4 style="color: var(--success); margin-bottom: 15px;">‚úÖ Practice Resources</h4>
                <ul style="line-height: 2; color: var(--dark); margin-left: 20px;">
                    <li><strong>Previous Year Papers:</strong> Last 10-15 years (mandatory)</li>
                    <li><strong>Standard Books:</strong> NCERT + Reference books</li>
                    <li><strong>Online Platforms:</strong> Free mock tests on NTA website</li>
                    <li><strong>Question Banks:</strong> Chapter-wise practice questions</li>
                </ul>
            </div>
        </div>
    `;
}

// Weak Areas Content
function generateWeakAreasContent(exam) {
    return `
        <div style="margin: 20px 0;">
            <div style="background: rgba(255, 152, 0, 0.1); padding: 25px; border-radius: 12px; margin-bottom: 20px;">
                <h4 style="color: var(--warning); margin-bottom: 15px;">üîç Step 1: Identify Weak Areas</h4>
                <ul style="line-height: 2; color: var(--dark); margin-left: 20px;">
                    <li>Take a diagnostic test covering full syllabus</li>
                    <li>Analyze performance subject-wise and topic-wise</li>
                    <li>Mark topics where you scored less than 40%</li>
                    <li>Create a list of consistently weak concepts</li>
                </ul>
            </div>
            
            <div style="background: rgba(108, 99, 255, 0.05); padding: 25px; border-radius: 12px; margin-bottom: 20px;">
                <h4 style="color: var(--primary); margin-bottom: 15px;">üìö Step 2: Create Improvement Plan</h4>
                <table style="width: 100%; border-collapse: collapse; margin-top: 15px;">
                    <thead>
                        <tr style="background: var(--primary); color: white;">
                            <th style="padding: 12px; text-align: left;">Priority</th>
                            <th style="padding: 12px; text-align: left;">Action</th>
                            <th style="padding: 12px; text-align: left;">Timeline</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr style="background: white;">
                            <td style="padding: 12px; border-bottom: 1px solid var(--border);"><strong>High</strong></td>
                            <td style="padding: 12px; border-bottom: 1px solid var(--border);">Revise basic concepts from NCERT</td>
                            <td style="padding: 12px; border-bottom: 1px solid var(--border);">Week 1-2</td>
                        </tr>
                        <tr style="background: rgba(108, 99, 255, 0.02);">
                            <td style="padding: 12px; border-bottom: 1px solid var(--border);"><strong>Medium</strong></td>
                            <td style="padding: 12px; border-bottom: 1px solid var(--border);">Practice 50+ problems per weak topic</td>
                            <td style="padding: 12px; border-bottom: 1px solid var(--border);">Week 3-4</td>
                        </tr>
                        <tr style="background: white;">
                            <td style="padding: 12px;"><strong>Low</strong></td>
                            <td style="padding: 12px;">Regular revision and mock tests</td>
                            <td style="padding: 12px;">Ongoing</td>
                        </tr>
                    </tbody>
                </table>
            </div>
            
            <div style="background: rgba(76, 175, 80, 0.05); padding: 25px; border-radius: 12px;">
                <h4 style="color: var(--success); margin-bottom: 15px;">üí™ Step 3: Strengthening Techniques</h4>
                <ul style="line-height: 2; color: var(--dark); margin-left: 20px;">
                    <li><strong>Watch video lectures</strong> for difficult concepts (Khan Academy, YouTube)</li>
                    <li><strong>Solve similar problems</strong> repeatedly until concept is clear</li>
                    <li><strong>Make notes</strong> in your own words for better retention</li>
                    <li><strong>Teach someone else</strong> - best way to solidify understanding</li>
                    <li><strong>Take weekly tests</strong> on weak topics to track improvement</li>
                </ul>
            </div>
        </div>
    `;
}

// Revision Content
function generateRevisionContent(exam) {
    return `
        <div style="margin: 20px 0;">
            <div style="background: linear-gradient(135deg, rgba(108, 99, 255, 0.1), rgba(255, 101, 132, 0.1)); padding: 25px; border-radius: 12px; margin-bottom: 20px;">
                <h4 style="color: var(--primary); margin-bottom: 15px;">üîÑ Complete Revision Strategy</h4>
                <p style="color: var(--dark); line-height: 1.8;">Revision is the key to retention! Follow this systematic approach to revise effectively:</p>
            </div>
            
            <div style="background: white; padding: 25px; border-radius: 12px; box-shadow: 0 2px 8px rgba(0,0,0,0.1); margin-bottom: 20px;">
                <h4 style="color: var(--secondary); margin-bottom: 15px;">üìÖ Last 30 Days Revision Plan</h4>
                <div style="display: grid; gap: 15px;">
                    <div style="padding: 15px; background: rgba(108, 99, 255, 0.05); border-radius: 8px;">
                        <strong style="color: var(--primary);">Days 30-21:</strong> Complete first revision of all subjects
                    </div>
                    <div style="padding: 15px; background: rgba(255, 101, 132, 0.05); border-radius: 8px;">
                        <strong style="color: var(--secondary);">Days 20-11:</strong> Second revision + formula sheets + shortcuts
                    </div>
                    <div style="padding: 15px; background: rgba(54, 209, 220, 0.05); border-radius: 8px;">
                        <strong style="color: var(--accent);">Days 10-4:</strong> Third revision + important questions only
                    </div>
                    <div style="padding: 15px; background: rgba(76, 175, 80, 0.05); border-radius: 8px;">
                        <strong style="color: var(--success);">Days 3-1:</strong> Formula revision + confidence building
                    </div>
                </div>
            </div>
            
            <div style="background: rgba(108, 99, 255, 0.05); padding: 25px; border-radius: 12px;">
                <h4 style="color: var(--primary); margin-bottom: 15px;">‚úÖ Revision Checklist</h4>
                <ul style="line-height: 2; color: var(--dark); margin-left: 20px;">
                    <li>‚úì Create formula sheets for quick revision</li>
                    <li>‚úì Prepare short notes for each chapter (1-2 pages max)</li>
                    <li>‚úì Mark important questions and practice them again</li>
                    <li>‚úì Revise previous year papers and their solutions</li>
                    <li>‚úì Focus on concepts you tend to forget</li>
                    <li>‚úì Do NOT study new topics in last week</li>
                </ul>
            </div>
        </div>
    `;
}

// Time Management Content
function generateTimeManagementContent(exam) {
    return `
        <div style="margin: 20px 0;">
            <div style="background: rgba(108, 99, 255, 0.05); padding: 25px; border-radius: 12px; margin-bottom: 20px;">
                <h4 style="color: var(--primary); margin-bottom: 15px;">‚è∞ Daily Time Management</h4>
                <table style="width: 100%; border-collapse: collapse;">
                    <thead>
                        <tr style="background: var(--primary); color: white;">
                            <th style="padding: 12px; text-align: left;">Time</th>
                            <th style="padding: 12px; text-align: left;">Activity</th>
                            <th style="padding: 12px; text-align: left;">Duration</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr style="background: white;">
                            <td style="padding: 12px; border-bottom: 1px solid var(--border);">6:00 - 9:00 AM</td>
                            <td style="padding: 12px; border-bottom: 1px solid var(--border);">Difficult subjects (Peak concentration)</td>
                            <td style="padding: 12px; border-bottom: 1px solid var(--border);">3 hours</td>
                        </tr>
                        <tr style="background: rgba(108, 99, 255, 0.02);">
                            <td style="padding: 12px; border-bottom: 1px solid var(--border);">9:00 - 10:00 AM</td>
                            <td style="padding: 12px; border-bottom: 1px solid var(--border);">Breakfast + Break</td>
                            <td style="padding: 12px; border-bottom: 1px solid var(--border);">1 hour</td>
                        </tr>
                        <tr style="background: white;">
                            <td style="padding: 12px; border-bottom: 1px solid var(--border);">10:00 - 1:00 PM</td>
                            <td style="padding: 12px; border-bottom: 1px solid var(--border);">Subject 2 + Problem solving</td>
                            <td style="padding: 12px; border-bottom: 1px solid var(--border);">3 hours</td>
                        </tr>
                        <tr style="background: rgba(108, 99, 255, 0.02);">
                            <td style="padding: 12px; border-bottom: 1px solid var(--border);">1:00 - 3:00 PM</td>
                            <td style="padding: 12px; border-bottom: 1px solid var(--border);">Lunch + Rest</td>
                            <td style="padding: 12px; border-bottom: 1px solid var(--border);">2 hours</td>
                        </tr>
                        <tr style="background: white;">
                            <td style="padding: 12px; border-bottom: 1px solid var(--border);">3:00 - 6:00 PM</td>
                            <td style="padding: 12px; border-bottom: 1px solid var(--border);">Subject 3 + Revision</td>
                            <td style="padding: 12px; border-bottom: 1px solid var(--border);">3 hours</td>
                        </tr>
                        <tr style="background: rgba(108, 99, 255, 0.02);">
                            <td style="padding: 12px; border-bottom: 1px solid var(--border);">6:00 - 7:00 PM</td>
                            <td style="padding: 12px; border-bottom: 1px solid var(--border);">Exercise / Outdoor activity</td>
                            <td style="padding: 12px; border-bottom: 1px solid var(--border);">1 hour</td>
                        </tr>
                        <tr style="background: white;">
                            <td style="padding: 12px; border-bottom: 1px solid var(--border);">7:00 - 9:00 PM</td>
                            <td style="padding: 12px; border-bottom: 1px solid var(--border);">Dinner + Family time</td>
                            <td style="padding: 12px; border-bottom: 1px solid var(--border);">2 hours</td>
                        </tr>
                        <tr style="background: rgba(108, 99, 255, 0.02);">
                            <td style="padding: 12px;">9:00 - 11:00 PM</td>
                            <td style="padding: 12px;">Quick revision + Next day planning</td>
                            <td style="padding: 12px;">2 hours</td>
                        </tr>
                    </tbody>
                </table>
            </div>
            
            <div style="background: rgba(76, 175, 80, 0.05); padding: 25px; border-radius: 12px;">
                <h4 style="color: var(--success); margin-bottom: 15px;">üí° Time Management Tips</h4>
                <ul style="line-height: 2; color: var(--dark); margin-left: 20px;">
                    <li>Use Pomodoro Technique: 25 min study + 5 min break</li>
                    <li>Study difficult subjects in morning (peak brain activity)</li>
                    <li>Take proper breaks to avoid burnout</li>
                    <li>Sleep 7-8 hours daily (crucial for retention)</li>
                    <li>Avoid social media during study hours</li>
                    <li>Plan next day's tasks before sleeping</li>
                </ul>
            </div>
        </div>
    `;
}

// Stress Management Content
function generateStressManagementContent(exam) {
    return `
        <div style="margin: 20px 0;">
            <div style="background: linear-gradient(135deg, rgba(76, 175, 80, 0.1), rgba(54, 209, 220, 0.1)); padding: 25px; border-radius: 12px; margin-bottom: 20px; text-align: center;">
                <h4 style="color: var(--success); margin-bottom: 10px;">üßò Mental Health is as Important as Studies!</h4>
                <p style="color: var(--dark); margin: 0;">Your well-being matters. Here's how to stay mentally fit during preparation:</p>
            </div>
            
            <div style="background: white; padding: 25px; border-radius: 12px; box-shadow: 0 2px 8px rgba(0,0,0,0.1); margin-bottom: 20px;">
                <h4 style="color: var(--primary); margin-bottom: 15px;">üåü Daily Stress-Busting Activities</h4>
                <ul style="line-height: 2; color: var(--dark); margin-left: 20px;">
                    <li><strong>Morning Meditation:</strong> 10-15 minutes to calm your mind</li>
                    <li><strong>Exercise:</strong> 30-45 minutes daily (yoga, walking, sports)</li>
                    <li><strong>Hobbies:</strong> 30 minutes for activities you enjoy</li>
                    <li><strong>Social Connection:</strong> Talk to family/friends regularly</li>
                    <li><strong>Proper Sleep:</strong> 7-8 hours (non-negotiable!)</li>
                    <li><strong>Healthy Diet:</strong> Nutritious meals, avoid junk food</li>
                </ul>
            </div>
            
            <div style="background: rgba(255, 152, 0, 0.05); padding: 25px; border-radius: 12px; margin-bottom: 20px;">
                <h4 style="color: var(--warning); margin-bottom: 15px;">‚ö†Ô∏è Warning Signs of Burnout</h4>
                <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 15px;">
                    <div style="padding: 15px; background: white; border-radius: 8px;">
                        <p style="margin: 0; color: var(--dark);">üò∞ Constant anxiety or worry</p>
                    </div>
                    <div style="padding: 15px; background: white; border-radius: 8px;">
                        <p style="margin: 0; color: var(--dark);">üò¥ Difficulty sleeping</p>
                    </div>
                    <div style="padding: 15px; background: white; border-radius: 8px;">
                        <p style="margin: 0; color: var(--dark);">ü§Ø Can't concentrate</p>
                    </div>
                    <div style="padding: 15px; background: white; border-radius: 8px;">
                        <p style="margin: 0; color: var(--dark);">üòî Loss of motivation</p>
                    </div>
                </div>
                <p style="margin-top: 15px; color: var(--dark); font-weight: 500;">If you notice these signs, TAKE A BREAK! Talk to parents/teachers/counselor.</p>
            </div>
            
            <div style="background: rgba(76, 175, 80, 0.05); padding: 25px; border-radius: 12px;">
                <h4 style="color: var(--success); margin-bottom: 15px;">üíö Quick Relaxation Techniques</h4>
                <ol style="line-height: 2; color: var(--dark); margin-left: 20px;">
                    <li><strong>Deep Breathing:</strong> Inhale for 4 counts, hold for 4, exhale for 4</li>
                    <li><strong>5-Minute Walk:</strong> Step outside, get some fresh air</li>
                    <li><strong>Listen to Music:</strong> Your favorite calming songs</li>
                    <li><strong>Talk it Out:</strong> Share your feelings with someone you trust</li>
                    <li><strong>Positive Affirmations:</strong> "I am capable. I am prepared. I will do my best."</li>
                </ol>
            </div>
            
            <div style="background: rgba(108, 99, 255, 0.1); padding: 20px; border-radius: 12px; margin-top: 20px; text-align: center;">
                <p style="margin: 0; color: var(--dark); font-size: 16px;"><strong>Remember:</strong> Your exam performance doesn't define your worth. You are more than your marks! üíô</p>
            </div>
        </div>
    `;
}

// Download Study Plan Function
function downloadStudyPlan(examName, strategy) {
    alert(`Download feature coming soon! Your ${strategy} plan for ${examName} will be saved as PDF.`);
    // TODO: Implement PDF generation using jsPDF or similar library
}


        // Document Upload Handler
        async function handleDocumentUpload(event) {
            const file = event.target.files[0];
            if (!file) return;
            
            // Show loading
            showLoading('Scanning document...');
            
            const formData = new FormData();
            formData.append('file', file);
            
            try {
                const response = await fetch(`${API_URL}/upload`, {
                    method: 'POST',
                    body: formData
                });

                const data = await response.json();
                hideLoading();

               if (data.statistics) {
    html += `
        <div class="stats-summary">
            <div class="stat-card">
                <h3>${data.total_matches}</h3>
                <p>Total Matches</p>
            </div>
            <div class="stat-card">
                <h3>‚Çπ${data.statistics.total_amount.toLocaleString('en-IN')}</h3>
                <p>Total Potential</p>
            </div>
            <div class="stat-card">
                <h3>${data.statistics.wb_scholarships || 0}</h3>
                <p>West Bengal üéì</p>
            </div>
            <div class="stat-card">
                <h3>${data.statistics.national_scholarships || 0}</h3>
                <p>National üáÆüá≥</p>
                ${scholarship.match_reasons && scholarship.match_reasons.length > 0 ? `
    <div style="background: rgba(76, 175, 80, 0.1); padding: 15px; border-radius: 10px; margin: 15px 0;">
        <strong style="color: #4CAF50;">Why you qualify:</strong>
        <ul style="margin: 10px 0 0 20px; color: #2D3748;">
            ${scholarship.match_reasons.map(reason => `<li>${reason}</li>`).join('')}
        </ul>
    </div>
` : ''}${scholarship.match_reasons && scholarship.match_reasons.length > 0 ? `
    <div style="background: rgba(76, 175, 80, 0.1); padding: 15px; border-radius: 10px; margin: 15px 0;">
        <strong style="color: #4CAF50;">Why you qualify:</strong>
        <ul style="margin: 10px 0 0 20px; color: #2D3748;">
            ${scholarship.match_reasons.map(reason => `<li>${reason}</li>`).join('')}
        </ul>
    </div>
` : ''}
            </div>
        </div>
    `;

                } else {
                    showError(data.error || 'Failed to process document. Please try again.');
                }
                
            } catch (error) {
                hideLoading();
                showError('Connection error. Make sure backend is running on port 5000.');
                console.error('Upload error:', error);
            }
        }

        // Manual Entry Handler
        async function handleManualSubmit() {
            const formData = {
                name: document.getElementById('name')?.value,
                percentage: parseFloat(document.getElementById('percentage')?.value),
                income: parseInt(document.getElementById('income')?.value),
                category: document.getElementById('category')?.value,
                stream: document.getElementById('stream')?.value,
                state: document.getElementById('state')?.value
            };
            
            // Validation
            if (!formData.percentage || !formData.income || !formData.category) {
                alert('Please fill all required fields (Percentage, Income, Category)');
                return;
            }
            
            showLoading('Finding scholarships...');
            
            try {
                const response = await fetch(`${API_URL}/manual`, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify(formData)
                });

                const data = await response.json();
                hideLoading();

                if (data.success) {
                    displayResults(data);
                } else {
                    showError(data.error || 'Failed to find scholarships. Please try again.');
                }
                
            } catch (error) {
                hideLoading();
                showError('Connection error. Make sure backend is running on port 5000.');
                console.error('Manual entry error:', error);
            }
        }

        // Display Results
        function displayResults(data) {
            const resultsDiv = document.getElementById('results');
            if (!resultsDiv) return;
            
            let html = '<div class="results-container">';
            
            // Statistics
            if (data.statistics) {
                html += `
                    <div class="stats-summary">
                        <div class="stat-card">
                            <h3>${data.total_matches}</h3>
                            <p>Matches Found</p>
                        </div>
                        <div class="stat-card">
                            <h3>‚Çπ${data.statistics.total_amount.toLocaleString('en-IN')}</h3>
                            <p>Total Potential</p>
                        </div>
                        <div class="stat-card">
                            <h3>‚Çπ${data.statistics.highest_amount?.toLocaleString('en-IN') || '0'}</h3>
                            <p>Highest Amount</p>
                        </div>
                    </div>
                    <div class="wb-highlight" v-if="data.statistics.wb_scholarships > 0">
    <div class="highlight-card">
        <h3>üéì West Bengal Special Scholarships</h3>
        <p>You're eligible for <strong>${data.statistics.wb_scholarships}</strong> West Bengal state scholarships including Kanyashree, Swami Vivekananda, and more!</p>
    </div>
</div>
                `;
            }
            
            // Student Data
            if (data.student_data) {
                html += `
                    <div class="student-data-card">
                        <h3><i class="fas fa-user-graduate"></i> Your Information</h3>
                        <div class="data-grid">
                            ${data.student_data.name ? `<p><strong>Name:</strong> ${data.student_data.name}</p>` : ''}
                            <p><strong>Percentage:</strong> ${data.student_data.percentage?.toFixed(1)}%</p>
                            <p><strong>Income:</strong> ‚Çπ${data.student_data.income?.toLocaleString('en-IN')}</p>
                            <p><strong>Category:</strong> ${data.student_data.category}</p>
                            ${data.student_data.stream ? `<p><strong>Stream:</strong> ${data.student_data.stream}</p>` : ''}
                            ${data.student_data.state ? `<p><strong>State:</strong> ${data.student_data.state}</p>` : ''}
                        </div>
                    </div>
                `;
            }
            
            // Scholarships
            if (data.matched_scholarships && data.matched_scholarships.length > 0) {
                html += '<div class="scholarships-list">';
                
                data.matched_scholarships.forEach(scholarship => {
                    let urgencyBadge = '';
    if (scholarship.urgency === 'critical') {
        urgencyBadge = '<span style="background: #F44336; color: white; padding: 6px 12px; border-radius: 20px; font-size: 0.85em; font-weight: 600;">üî• Apply Now!</span>';
    } else if (scholarship.urgency === 'high') {
        urgencyBadge = '<span style="background: #FF9800; color: white; padding: 6px 12px; border-radius: 20px; font-size: 0.85em; font-weight: 600;">‚è∞ Closing Soon</span>';
    }
    
    html += `
        <div class="scholarship-card">
            <div class="scholarship-header">
                <div>
                    <h3>${scholarship.name}</h3>
                    ${urgencyBadge}
                </div>
                <span class="amount">‚Çπ${scholarship.amount.toLocaleString('en-IN')}</span>
            </div>
                            <p class="description">${scholarship.description}</p>
                            <div class="scholarship-details">
    <span>Min: ${scholarship.min_percentage}%</span>
    <span>Income: ‚Çπ${scholarship.max_income.toLocaleString('en-IN')}</span>
    <span>Deadline: ${scholarship.deadline}</span>
    ${scholarship.days_until_deadline !== null && scholarship.days_until_deadline >= 0 ? 
        `<span style="background: ${scholarship.days_until_deadline < 30 ? 'rgba(255, 152, 0, 0.1)' : 'rgba(76, 175, 80, 0.1)'}; color: ${scholarship.days_until_deadline < 30 ? '#FF9800' : '#4CAF50'}; font-weight: 600;">
            ${scholarship.days_until_deadline} days left
        </span>` 
    : ''}
    ${scholarship.match_percentage ? 
        `<span style="background: rgba(76, 175, 80, 0.1); color: #4CAF50; font-weight: 600;">
            ${scholarship.match_percentage}% Match
        </span>` 
    : ''}
</div>
                            ${scholarship.apply_url ? `
                                <a href="${scholarship.apply_url}" target="_blank" class="apply-btn">
                                    Apply Now <i class="fas fa-arrow-right"></i>
                                </a>
                            ` : ''}
                        </div>
                    `;
                });
                
                html += '</div>';
            } else {
                html += '<div class="no-results">No matching scholarships found</div>';
            }
            
            html += '</div>';
            resultsDiv.innerHTML = html;
        }

        // Load Exams
        async function loadExams() {
            const content = document.getElementById('exams-content');
            if (!content) return;
            
            content.innerHTML = '<div class="loading">Loading exams...</div>';
            
            try {
                const response = await fetch(`${API_URL}/exams`);
                const data = await response.json();

                if (data.success && data.exams) {
                    let html = '';
                    data.exams.forEach(exam => {
                        html += `
                            <div class="exam-card">
                                <h3>${exam.name} - ${exam.full_name}</h3>
                                <p><strong>Conducting Body:</strong> ${exam.conducting_body}</p>
                                <p><strong>Exam Date:</strong> ${exam.exam_date}</p>
                                <p><strong>Min Percentage:</strong> ${exam.eligibility.min_percentage}%</p>
                                <p><strong>Subjects:</strong> ${Array.isArray(exam.eligibility.subjects) ? exam.eligibility.subjects.join(', ') : exam.eligibility.subjects}</p>
                                ${exam.application_url ? `
                                    <a href="${exam.application_url}" target="_blank" class="apply-btn">
                                        Apply for ${exam.name} <i class="fas fa-arrow-right"></i>
                                    </a>
                                ` : ''}
                            </div>
                        `;
                    });
                    content.innerHTML = html;
                } else {
                    content.innerHTML = '<div class="error-message">Failed to load exams</div>';
                }
                
            } catch (error) {
                content.innerHTML = '<div class="error-message">Failed to load exams. Make sure backend is running.</div>';
                console.error('Exams error:', error);
            }
        }

        // Load Guidance
        async function loadGuidance(type) {
            const content = document.getElementById('guidance-content');
            if (!content) return;
            
            if (!type) {
                content.innerHTML = '<p>Please select a guidance type to continue.</p>';
                return;
            }
            
            content.innerHTML = '<div class="loading">Loading guidance...</div>';
            
            try {
                // In a real implementation, this would be an actual API call
                // For demo, we'll simulate a response after a delay
                setTimeout(() => {
                    let guidanceHtml = '';
                    
                    if (type === 'scholarship') {
                        guidanceHtml = `
                            <h4>Scholarship Application Process</h4>
                            <div class="guidance-grid">
                                <div class="guidance-card">
                                    <h5>Step 1: Research</h5>
                                    <p>Identify scholarships that match your profile and eligibility criteria.</p>
                                </div>
                                <div class="guidance-card">
                                    <h5>Step 2: Prepare Documents</h5>
                                    <p>Gather all required documents - marksheets, income certificates, ID proofs.</p>
                                </div>
                                <div class="guidance-card">
                                    <h5>Step 3: Fill Application</h5>
                                    <p>Complete the application form carefully with accurate information.</p>
                                </div>
                                <div class="guidance-card">
                                    <h5>Step 4: Submit & Follow Up</h5>
                                    <p>Submit before deadline and keep track of your application status.</p>
                                </div>
                            </div>
                        `;
                    } else if (type === 'exam') {
                        guidanceHtml = `
                            <h4>Exam Preparation Strategy</h4>
                            <div class="guidance-grid">
                                <div class="guidance-card" data-strategy="study-plan">
                                    <h5><i class="fas fa-calendar-check"></i> Create Study Plan</h5>
                                    <p>Get a personalized study schedule covering all subjects and topics for your exam.</p>
                                </div>
                                <div class="guidance-card" data-strategy="practice">
                                    <h5><i class="fas fa-book-open"></i> Practice Regularly</h5>
                                    <p>Get a practice routine with previous years' papers and mock test schedule.</p>
                                </div>
                                <div class="guidance-card" data-strategy="weak-areas">
                                    <h5><i class="fas fa-chart-line"></i> Focus on Weak Areas</h5>
                                    <p>Get strategies to identify and strengthen your weak topics effectively.</p>
                                </div>
                                <div class="guidance-card" data-strategy="revision">
                                    <h5><i class="fas fa-redo"></i> Revision Strategy</h5>
                                    <p>Get a complete revision plan to cover all topics before the exam.</p>
                                </div>
                                <div class="guidance-card" data-strategy="time-management">
                                    <h5><i class="fas fa-clock"></i> Time Management</h5>
                                    <p>Learn effective time management techniques for exam preparation.</p>
                                </div>
                                <div class="guidance-card" data-strategy="stress-management">
                                    <h5><i class="fas fa-heart"></i> Stress Management</h5>
                                    <p>Get tips to manage exam stress and maintain mental well-being.</p>
                                </div>
                            </div>
                        `;
                        
                        // Attach click handlers after content is loaded
                        setTimeout(() => {
                            attachGuidanceCardListeners();
                        }, 100);

                    } else if (type === 'documents') {
                guidanceHtml = `
                    <h4 style="color: var(--primary); margin-bottom: 20px;">üìÑ Required Documents Checklist</h4>
                    <div class="guidance-grid">
                        <div class="guidance-card">
                            <h5>Academic Documents</h5>
                            <p>‚Ä¢ Latest marksheet/grade card<br>‚Ä¢ All previous semester results<br>‚Ä¢ School/College ID card<br>‚Ä¢ Bonafide certificate</p>
                        </div>
                        <div class="guidance-card">
                            <h5>Identity Proof</h5>
                            <p>‚Ä¢ Aadhar card (mandatory)<br>‚Ä¢ PAN card (if applicable)<br>‚Ä¢ Passport size photos<br>‚Ä¢ Birth certificate</p>
                        </div>
                        <div class="guidance-card">
                            <h5>Income Documents</h5>
                            <p>‚Ä¢ Income certificate from Tehsildar<br>‚Ä¢ Parent's salary slips<br>‚Ä¢ ITR (if applicable)<br>‚Ä¢ BPL card (if applicable)</p>
                        </div>
                        <div class="guidance-card">
                            <h5>Category Certificates</h5>
                            <p>‚Ä¢ Caste certificate (SC/ST/OBC)<br>‚Ä¢ EWS certificate<br>‚Ä¢ Minority certificate<br>‚Ä¢ Disability certificate (if applicable)</p>
                        </div>
                        <div class="guidance-card">
                            <h5>Bank Details</h5>
                            <p>‚Ä¢ Bank passbook copy<br>‚Ä¢ Account number & IFSC<br>‚Ä¢ Cancelled cheque<br>‚Ä¢ Account should be in student's name</p>
                        </div>
                        <div class="guidance-card">
                            <h5>Additional Documents</h5>
                            <p>‚Ä¢ Domicile certificate<br>‚Ä¢ Gap year affidavit (if any)<br>‚Ä¢ Migration certificate<br>‚Ä¢ Transfer certificate</p>
                        </div>
                    </div>
                    <div style="background: rgba(108, 99, 255, 0.1); padding: 20px; border-radius: 12px; margin-top: 20px;">
                        <p style="margin: 0; color: var(--dark);"><strong>üí° Pro Tip:</strong> Always keep self-attested photocopies ready. Some scholarships may require physical submission.</p>
                    </div>
                `;
                
            } else if (type === 'interview') {
                guidanceHtml = `
                    <h4 style="color: var(--primary); margin-bottom: 20px;">üé§ Interview Preparation Guide</h4>
                    <div class="guidance-grid">
                        <div class="guidance-card">
                            <h5>Know Yourself</h5>
                            <p>‚Ä¢ Prepare your introduction<br>‚Ä¢ Know your strengths & weaknesses<br>‚Ä¢ Be ready to explain career goals<br>‚Ä¢ Practice common questions</p>
                        </div>
                        <div class="guidance-card">
                            <h5>Research the Organization</h5>
                            <p>‚Ä¢ Know about the scholarship provider<br>‚Ä¢ Understand their mission & values<br>‚Ä¢ Research past recipients<br>‚Ä¢ Prepare relevant questions</p>
                        </div>
                        <div class="guidance-card">
                            <h5>Academic Preparation</h5>
                            <p>‚Ä¢ Review your academic achievements<br>‚Ä¢ Explain any grade variations<br>‚Ä¢ Discuss favorite subjects<br>‚Ä¢ Show passion for learning</p>
                        </div>
                        <div class="guidance-card">
                            <h5>Personal Questions</h5>
                            <p>‚Ä¢ Family background<br>‚Ä¢ Financial situation<br>‚Ä¢ Why you need this scholarship<br>‚Ä¢ How it will help your future</p>
                        </div>
                        <div class="guidance-card">
                            <h5>Behavioral Questions</h5>
                            <p>‚Ä¢ Leadership examples<br>‚Ä¢ Teamwork experiences<br>‚Ä¢ Problem-solving situations<br>‚Ä¢ Handling failures/challenges</p>
                        </div>
                        <div class="guidance-card">
                            <h5>Presentation Tips</h5>
                            <p>‚Ä¢ Dress formally<br>‚Ä¢ Maintain eye contact<br>‚Ä¢ Speak clearly & confidently<br>‚Ä¢ Show enthusiasm & gratitude</p>
                        </div>
                    </div>
                    <div style="background: rgba(76, 175, 80, 0.1); padding: 20px; border-radius: 12px; margin-top: 20px;">
                        <h5 style="color: var(--success); margin-bottom: 10px;">üìù Common Interview Questions:</h5>
                        <ul style="color: var(--dark); line-height: 1.8; margin-left: 20px;">
                            <li>Tell us about yourself</li>
                            <li>Why do you deserve this scholarship?</li>
                            <li>What are your career goals?</li>
                            <li>How will this scholarship help you?</li>
                            <li>What are your greatest strengths?</li>
                            <li>Describe a challenging situation you overcame</li>
                            <li>How do you contribute to your community?</li>
                            <li>Where do you see yourself in 5 years?</li>
                        </ul>
                    </div>
                `;
            } else {
                guidanceHtml = `<p style="padding: 20px; color: var(--gray);">Guidance content for ${type} will be available soon.</p>`;
            }
            
            content.innerHTML = guidanceHtml;
        }, 500);
        
    } catch (error) {
        content.innerHTML = '<div class="error-message"><i class="fas fa-exclamation-circle"></i> Failed to load guidance</div>';
        console.error('Guidance error:', error);
    }
}

        // Helper Functions
        function showLoading(message) {
            const resultsDiv = document.getElementById('results');
            if (resultsDiv) {
                resultsDiv.innerHTML = `
                    <div class="loading">
                        <div class="spinner"></div>
                        <p>${message}</p>
                    </div>
                `;
            }
        }

        function hideLoading() {
            // Loading will be replaced by results
        }

        function showError(message) {
            const resultsDiv = document.getElementById('results');
            if (resultsDiv) {
                resultsDiv.innerHTML = `
                    <div class="error-message">
                        <i class="fas fa-exclamation-circle"></i> ${message}
                    </div>
                `;
            }
        }

        // Chatbot Functionality
        let selectedExam = null;
        let currentStrategy = null;

        function initChatbot() {
            const toggleBtn = document.getElementById('chatbot-toggle');
            const closeBtn = document.getElementById('chatbot-close');
            const container = document.getElementById('chatbot-container');
            const sendBtn = document.getElementById('chatbot-send');
            const input = document.getElementById('chatbot-input');

            if (toggleBtn) {
                toggleBtn.addEventListener('click', () => {
                    container.classList.toggle('active');
                });
            }

            if (closeBtn) {
                closeBtn.addEventListener('click', () => {
                    container.classList.remove('active');
                });
            }

            const sendMessage = () => {
                const message = input.value.trim();
                if (!message) return;

                addChatMessage(message, 'user');
                input.value = '';

                // Send to backend
                sendChatbotQuery(message);
            };

            if (sendBtn) {
                sendBtn.addEventListener('click', sendMessage);
            }

            if (input) {
                input.addEventListener('keypress', (e) => {
                    if (e.key === 'Enter') {
                        sendMessage();
                    }
                });
            }
        }

        function addChatMessage(text, type) {
            const messagesDiv = document.getElementById('chatbot-messages');
            if (!messagesDiv) return;

            const messageDiv = document.createElement('div');
            messageDiv.className = `chatbot-message ${type}`;
            messageDiv.textContent = text;
            messagesDiv.appendChild(messageDiv);
            messagesDiv.scrollTop = messagesDiv.scrollHeight;
        }

        async function sendChatbotQuery(query) {
            try {
                const response = await fetch(`${API_URL}/chatbot`, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify({
                        query: query,
                        user_id: 'default',
                        language: currentLanguage
                    })
                });

                const data = await response.json();
                if (data.success) {
                    // Format the response (handle markdown-like formatting)
                    let formattedResponse = data.response;
                    formattedResponse = formattedResponse.replace(/\*\*(.*?)\*\*/g, '<strong>$1</strong>');
                    formattedResponse = formattedResponse.replace(/\*(.*?)\*/g, '<em>$1</em>');
                    formattedResponse = formattedResponse.replace(/\n/g, '<br>');

                    const messagesDiv = document.getElementById('chatbot-messages');
                    const messageDiv = document.createElement('div');
                    messageDiv.className = 'chatbot-message bot';
                    messageDiv.innerHTML = formattedResponse;
                    messagesDiv.appendChild(messageDiv);
                    messagesDiv.scrollTop = messagesDiv.scrollHeight;
                } else {
                    addChatMessage('Sorry, I encountered an error. Please try again.', 'bot');
                }
            } catch (error) {
                console.error('Chatbot error:', error);
                addChatMessage('Unable to connect. Please make sure the backend is running.', 'bot');
            }
        }

        // Exam Selection Modal
        function initExamModal() {
            const modal = document.getElementById('exam-modal');
            const closeBtn = document.getElementById('modal-close');
            const generateBtn = document.getElementById('generate-plan-btn');

            if (closeBtn) {
                closeBtn.addEventListener('click', () => {
                    modal.classList.remove('active');
                    selectedExam = null;
                    currentStrategy = null;
                });
            }

            if (modal) {
                modal.addEventListener('click', (e) => {
                    if (e.target === modal) {
                        modal.classList.remove('active');
                        selectedExam = null;
                        currentStrategy = null;
                    }
                });
            }

            if (generateBtn) {
                generateBtn.addEventListener('click', () => {
                    if (selectedExam && currentStrategy) {
                        generateStudyPlan(selectedExam, currentStrategy);
                    }
                });
            }
        }

        function attachGuidanceCardListeners() {
            document.querySelectorAll('.guidance-card[data-strategy]').forEach(card => {
                card.addEventListener('click', function() {
                    const strategy = this.getAttribute('data-strategy');
                    openExamModal(strategy);
                });
            });
        }

        // Theme Toggle Functionality
function initThemeToggle() {
    const themeToggle = document.getElementById('theme-toggle');
    const themeIcon = themeToggle.querySelector('.theme-icon');
    
    // Check for saved theme preference or default to 'light'
    const currentTheme = localStorage.getItem('theme') || 'light';
    document.documentElement.setAttribute('data-theme', currentTheme);
    updateThemeIcon(currentTheme);
    
    themeToggle.addEventListener('click', function() {
        let theme = document.documentElement.getAttribute('data-theme');
        let newTheme = theme === 'light' ? 'dark' : 'light';
        
        document.documentElement.setAttribute('data-theme', newTheme);
        localStorage.setItem('theme', newTheme);
        updateThemeIcon(newTheme);
    });
    
    function updateThemeIcon(theme) {
        themeIcon.textContent = theme === 'light' ? 'üåô' : '‚òÄÔ∏è';
    }
}

// Initialize theme toggle on page load
initThemeToggle();


        function openExamModal(strategy) {
            currentStrategy = strategy;
            const modal = document.getElementById('exam-modal');
            const modalTitle = document.getElementById('modal-title');
            const modalSubtitle = document.getElementById('modal-subtitle');
            const examOptions = document.getElementById('exam-options');
            const generateBtn = document.getElementById('generate-plan-btn');
            const resultDiv = document.getElementById('study-plan-result');

            // Set modal title based on strategy
            const strategyNames = {
                'study-plan': 'Create Study Plan',
                'practice': 'Practice Schedule',
                'weak-areas': 'Weak Areas Strategy',
                'revision': 'Revision Strategy',
                'time-management': 'Time Management',
                'stress-management': 'Stress Management'
            };

            modalTitle.textContent = strategyNames[strategy] || 'Select Your Exam';
            modalSubtitle.textContent = 'Choose the exam you\'re preparing for to get personalized guidance';

            // Load exams
            loadExamsForModal(examOptions);

            // Show modal
            modal.classList.add('active');
            generateBtn.style.display = 'none';
            resultDiv.innerHTML = '';
        }

        async function handleEmailSubmit() {
    const email = document.getElementById('email').value.trim();
    
    if (!isValidEmail(email)) {
        showMessage('Invalid email', 'error');
        return;
    }
    
    try {
        // Call your backend
        const response = await fetch('/auth/email-login', {
            method: 'POST',
            headers: { 'Content-Type': 'application/json' },
            body: JSON.stringify({ email })
        });
        
        const data = await response.json();
        
        if (data.success) {
            currentEmail = email;
            // Move to code step
            // DON'T show code (backend sends email)
            document.getElementById('email-step').classList.remove('active');
            document.getElementById('code-step').classList.add('active');
            // Hide code-display div!
        }
    } catch (error) {
        showMessage('Failed to send code', 'error');
    }
}


        async function loadExamsForModal(container) {
            container.innerHTML = '<div class="loading">Loading exams...</div>';

            try {
                const response = await fetch(`${API_URL}/exams`);
                const data = await response.json();

                if (data.success && data.exams) {
                    let html = '';
                    data.exams.forEach(exam => {
                        html += `
                            <div class="exam-option" data-exam-id="${exam.id}" data-exam-name="${exam.name}">
                                <div class="exam-option-icon">
                                    ${exam.name.includes('JEE') ? 'üéØ' : exam.name.includes('NEET') ? 'ü©∫' : 'üéì'}
                                </div>
                                <div class="exam-option-content">
                                    <h4>${exam.name}</h4>
                                    <p>${exam.full_name} - ${exam.exam_date}</p>
                                </div>
                            </div>
                        `;
                    });

                    container.innerHTML = html;

                    // Attach click handlers
                    container.querySelectorAll('.exam-option').forEach(option => {
                        option.addEventListener('click', function() {
                            // Remove previous selection
                            container.querySelectorAll('.exam-option').forEach(opt => {
                                opt.classList.remove('selected');
                            });

                            // Select this option
                            this.classList.add('selected');
                            selectedExam = {
                                id: this.getAttribute('data-exam-id'),
                                name: this.getAttribute('data-exam-name')
                            };

                            // Show generate button
                            document.getElementById('generate-plan-btn').style.display = 'block';
                        });
                    });
                } else {
                    // Fallback to mock data
                    const mockExams = [
                        { id: 1, name: 'JEE Main', full_name: 'Joint Entrance Examination', exam_date: 'Jan & Apr 2026' },
                        { id: 2, name: 'NEET UG', full_name: 'National Eligibility cum Entrance Test', exam_date: 'May 2026' },
                        { id: 3, name: 'CUET UG', full_name: 'Common University Entrance Test', exam_date: 'May 2026' }
                    ];

                    let html = '';
                    mockExams.forEach(exam => {
                        html += `
                            <div class="exam-option" data-exam-id="${exam.id}" data-exam-name="${exam.name}">
                                <div class="exam-option-icon">
                                    ${exam.name.includes('JEE') ? 'üéØ' : exam.name.includes('NEET') ? 'ü©∫' : 'üéì'}
                                </div>
                                <div class="exam-option-content">
                                    <h4>${exam.name}</h4>
                                    <p>${exam.full_name} - ${exam.exam_date}</p>
                                </div>
                            </div>
                        `;
                    });

                    container.innerHTML = html;

                    container.querySelectorAll('.exam-option').forEach(option => {
                        option.addEventListener('click', function() {
                            container.querySelectorAll('.exam-option').forEach(opt => {
                                opt.classList.remove('selected');
                            });
                            this.classList.add('selected');
                            selectedExam = {
                                id: this.getAttribute('data-exam-id'),
                                name: this.getAttribute('data-exam-name')
                            };
                            document.getElementById('generate-plan-btn').style.display = 'block';
                        });
                    });
                }
            } catch (error) {
                console.error('Error loading exams:', error);
                container.innerHTML = '<div class="error-message">Failed to load exams. Using default options.</div>';
            }
        }

       function downloadStudyPlan(examName, strategy) {
    window.print();
}

        function formatStudyPlan(plan) {
            if (typeof plan === 'string') {
                // Convert markdown-like formatting to HTML
                let formatted = plan;
                formatted = formatted.replace(/\*\*(.*?)\*\*/g, '<strong>$1</strong>');
                formatted = formatted.replace(/\*(.*?)\*/g, '<em>$1</em>');
                formatted = formatted.replace(/\n\n/g, '</p><p>');
                formatted = formatted.replace(/\n/g, '<br>');
                formatted = formatted.replace(/### (.*?)(<br>|$)/g, '<h5>$1</h5>');
                formatted = formatted.replace(/## (.*?)(<br>|$)/g, '<h5>$1</h5>');
                formatted = formatted.replace(/^\d+\.\s+(.*?)$/gm, '<li>$1</li>');
                formatted = formatted.replace(/^- (.*?)$/gm, '<li>$1</li>');
                return '<p>' + formatted + '</p>';
            }
            return '<p>' + JSON.stringify(plan) + '</p>';
        }

        // Initialize everything on page load
        document.addEventListener('DOMContentLoaded', function() {
            initChatbot();
            initExamModal();
        });
    </script>
</body>
</html>

