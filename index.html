<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>EduFund - Smart Scholarship Finder</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        :root {
            --primary: #6C63FF;
            --primary-light: #8B85FF;
            --primary-dark: #5752D2;
            --secondary: #FF6584;
            --accent: #36D1DC;
            --success: #4CAF50;
            --warning: #FF9800;
            --error: #F44336;
            --dark: #2D3748;
            --darker: #1A202C;
            --light: #F7FAFC;
            --gray: #A0AEC0;
            --border: #E2E8F0;
            --card-shadow: 0 10px 25px rgba(108, 99, 255, 0.1);
            --hover-shadow: 0 15px 35px rgba(108, 99, 255, 0.15);
        }
        
        body {
            font-family: 'Poppins', -apple-system, BlinkMacSystemFont, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            color: var(--dark);
            line-height: 1.6;
        }

        /* Glassmorphism Container */
        .glass-container {
            max-width: 1200px;
            margin: 40px auto;
            background: rgba(255, 255, 255, 0.9);
            backdrop-filter: blur(20px);
            border-radius: 24px;
            padding: 40px;
            box-shadow: var(--card-shadow);
            border: 1px solid rgba(255, 255, 255, 0.3);
        }

        /* Header */
        .header {
            text-align: center;
            margin-bottom: 40px;
        }
        
        .logo {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 12px;
            margin-bottom: 16px;
        }
        
        .logo-icon {
            width: 50px;
            height: 50px;
            background: var(--primary);
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 1.5em;
            box-shadow: 0 8px 20px rgba(108, 99, 255, 0.3);
        }
        
        h1 {
            color: var(--dark);
            font-size: 2.8em;
            margin-bottom: 12px;
            font-weight: 700;
            background: linear-gradient(135deg, var(--primary) 0%, var(--secondary) 100%);
            -webkit-background-clip: text;
            background-clip: text;
            -webkit-text-fill-color: transparent;
        }
        
        .subtitle {
            color: var(--gray);
            font-size: 1.2em;
            max-width: 600px;
            margin: 0 auto;
        }

        /* Tabs - Modern Design */
        .tabs-container {
            margin-bottom: 40px;
        }

        .tabs {
            display: flex;
            gap: 8px;
            margin-bottom: 30px;
            background: rgba(247, 250, 252, 0.8);
            padding: 8px;
            border-radius: 16px;
            flex-wrap: wrap;
            border: 1px solid var(--border);
        }
        
        .tab-btn {
            padding: 16px 24px;
            background: transparent;
            border: none;
            cursor: pointer;
            font-size: 1.05em;
            color: var(--gray);
            border-radius: 12px;
            transition: all 0.3s ease;
            font-weight: 500;
            display: flex;
            align-items: center;
            gap: 10px;
            flex: 1;
            justify-content: center;
            min-width: 180px;
        }
        
        .tab-btn.active {
            background: white;
            color: var(--primary);
            box-shadow: 0 4px 12px rgba(108, 99, 255, 0.15);
        }
        
        .tab-btn:hover:not(.active) {
            background: rgba(108, 99, 255, 0.05);
            color: var(--primary-light);
        }
        
        .tab-content {
            display: none;
            animation: fadeIn 0.5s ease;
        }
        
        .tab-content.active {
            display: block;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* Upload Zone - Modern Design */
        .upload-card {
            background: white;
            border-radius: 20px;
            padding: 50px;
            text-align: center;
            transition: all 0.3s ease;
            box-shadow: var(--card-shadow);
            border: 2px dashed transparent;
            position: relative;
            overflow: hidden;
        }
        
        .upload-card:hover {
            transform: translateY(-5px);
            box-shadow: var(--hover-shadow);
            border-color: var(--primary-light);
        }
        
        .upload-card.dragover {
            background: rgba(108, 99, 255, 0.03);
            border-color: var(--primary);
        }
        
        .upload-icon {
            font-size: 4.5em;
            margin-bottom: 20px;
            color: var(--primary);
            opacity: 0.8;
        }
        
        .upload-text {
            font-size: 1.4em;
            color: var(--dark);
            margin-bottom: 12px;
            font-weight: 600;
        }
        
        .upload-subtext {
            color: var(--gray);
            font-size: 1em;
            margin-bottom: 30px;
        }

        .upload-features {
            display: flex;
            justify-content: center;
            gap: 30px;
            margin-top: 30px;
        }

        .upload-feature {
            display: flex;
            align-items: center;
            gap: 10px;
            font-size: 0.9em;
            color: var(--gray);
            background: rgba(108, 99, 255, 0.05);
            padding: 10px 16px;
            border-radius: 50px;
        }

        .feature-icon {
            color: var(--primary);
        }
        
        input[type="file"] {
            display: none;
        }

        /* Form - Modern Design */
        .form-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 25px;
            margin-bottom: 30px;
        }
        
        .form-group {
            display: flex;
            flex-direction: column;
        }
        
        label {
            font-weight: 600;
            color: var(--dark);
            margin-bottom: 10px;
            font-size: 0.95em;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .input-icon {
            color: var(--primary);
        }
        
        input, select {
            padding: 16px 20px;
            border: 1px solid var(--border);
            border-radius: 12px;
            font-size: 1em;
            transition: all 0.3s;
            background: white;
            font-family: 'Poppins', sans-serif;
        }
        
        input:focus, select:focus {
            outline: none;
            border-color: var(--primary);
            box-shadow: 0 0 0 3px rgba(108, 99, 255, 0.1);
        }

        /* Buttons - Modern Design */
        .btn {
            padding: 16px 36px;
            border: none;
            border-radius: 12px;
            font-size: 1.05em;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
        }
        
        .btn-primary {
            background: var(--primary);
            color: white;
            box-shadow: 0 4px 15px rgba(108, 99, 255, 0.3);
        }
        
        .btn-primary:hover {
            background: var(--primary-dark);
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(108, 99, 255, 0.4);
        }
        
        .btn-block {
            width: 100%;
        }

        /* Results Section - Modern Cards */
        .results-container {
            margin-top: 40px;
        }

        .stats-summary {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .stat-card {
            background: white;
            padding: 25px;
            border-radius: 16px;
            box-shadow: var(--card-shadow);
            border: 1px solid var(--border);
            text-align: center;
            transition: transform 0.3s;
            position: relative;
            overflow: hidden;
        }

        .stat-card:before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 4px;
            background: linear-gradient(90deg, var(--primary) 0%, var(--accent) 100%);
        }

        .stat-card:hover {
            transform: translateY(-5px);
            box-shadow: var(--hover-shadow);
        }

        .stat-card h3 {
            font-size: 2.2em;
            font-weight: 700;
            margin-bottom: 8px;
            color: var(--primary);
        }

        .stat-card p {
            color: var(--gray);
            font-size: 0.95em;
        }

        .student-data-card {
            background: white;
            padding: 30px;
            border-radius: 20px;
            margin-bottom: 30px;
            border: 1px solid var(--border);
            box-shadow: var(--card-shadow);
        }

        .student-data-card h3 {
            color: var(--primary);
            margin-bottom: 20px;
            font-size: 1.3em;
            font-weight: 600;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .data-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
            gap: 20px;
        }

        .data-grid p {
            margin-bottom: 10px;
            font-size: 1.1em;
            padding: 12px 16px;
            background: rgba(108, 99, 255, 0.05);
            border-radius: 10px;
        }

        .data-grid strong {
            color: var(--dark);
        }

        /* Scholarship Cards - Modern Design */
        .scholarships-list {
            display: grid;
            gap: 25px;
        }

        .scholarship-card {
            background: white;
            color: var(--dark);
            padding: 30px;
            border-radius: 20px;
            box-shadow: var(--card-shadow);
            transition: transform 0.3s, box-shadow 0.3s;
            border: 1px solid var(--border);
            position: relative;
            overflow: hidden;
        }
        
        .scholarship-card:hover {
            transform: translateY(-5px);
            box-shadow: var(--hover-shadow);
        }

        .scholarship-card:before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 4px;
            background: linear-gradient(90deg, var(--primary) 0%, var(--accent) 100%);
        }

        .scholarship-header {
            display: flex;
            justify-content: space-between;
            align-items: start;
            margin-bottom: 20px;
        }
        
        .scholarship-header h3 {
            font-size: 1.4em;
            font-weight: 700;
            flex: 1;
            padding-right: 20px;
            line-height: 1.3;
        }
        
        .amount {
            background: var(--primary);
            color: white;
            padding: 10px 20px;
            border-radius: 50px;
            font-size: 1.3em;
            font-weight: 700;
            box-shadow: 0 4px 15px rgba(108, 99, 255, 0.3);
        }
        
        .description {
            margin-bottom: 25px;
            color: var(--gray);
            line-height: 1.6;
            font-size: 1em;
        }
        
        .scholarship-details {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
            gap: 15px;
            margin-bottom: 20px;
        }
        
        .scholarship-details span {
            background: rgba(108, 99, 255, 0.05);
            padding: 12px 16px;
            border-radius: 10px;
            font-size: 0.9em;
            border: 1px solid var(--border);
            text-align: center;
            transition: all 0.3s;
        }

        .scholarship-details span:hover {
            background: rgba(108, 99, 255, 0.1);
            transform: translateY(-2px);
        }

        .apply-btn {
            margin-top: 20px;
            display: inline-flex;
            align-items: center;
            gap: 10px;
            background: var(--primary);
            color: white;
            padding: 14px 28px;
            border-radius: 12px;
            text-decoration: none;
            font-weight: 600;
            transition: all 0.3s;
            box-shadow: 0 4px 15px rgba(108, 99, 255, 0.3);
        }

        .apply-btn:hover {
            background: var(--primary-dark);
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(108, 99, 255, 0.4);
        }

        /* Exam Cards - Modern Design */
        .exam-card {
            background: white;
            padding: 25px;
            border-radius: 16px;
            box-shadow: var(--card-shadow);
            border: 1px solid var(--border);
            margin-bottom: 20px;
            transition: transform 0.3s;
            position: relative;
            overflow: hidden;
        }

        .exam-card:before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 4px;
            background: linear-gradient(90deg, var(--secondary) 0%, var(--accent) 100%);
        }

        .exam-card:hover {
            transform: translateY(-5px);
            box-shadow: var(--hover-shadow);
        }

        .exam-card h3 {
            color: var(--primary);
            margin-bottom: 15px;
            font-size: 1.3em;
        }

        .exam-card p {
            margin-bottom: 10px;
            color: var(--dark);
        }

        /* Loading and Error States */
        .loading {
            text-align: center;
            padding: 50px;
            font-size: 1.2em;
            color: var(--primary);
        }
        
        .spinner {
            border: 4px solid rgba(108, 99, 255, 0.2);
            border-top: 4px solid var(--primary);
            border-radius: 50%;
            width: 60px;
            height: 60px;
            animation: spin 1s linear infinite;
            margin: 20px auto;
        }
        
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        
        .error-message {
            padding: 20px;
            border-radius: 14px;
            margin: 20px 0;
            font-size: 1.05em;
            background: rgba(244, 67, 54, 0.1);
            color: var(--error);
            border: 1px solid rgba(244, 67, 54, 0.2);
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .no-results {
            text-align: center;
            padding: 80px 40px;
            background: white;
            border-radius: 20px;
            border: 1px solid var(--border);
            font-size: 1.2em;
            color: var(--gray);
            box-shadow: var(--card-shadow);
        }

        /* Guidance Section */
        .guidance-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 20px;
        }

        .guidance-card {
            background: white;
            padding: 25px;
            border-radius: 16px;
            box-shadow: var(--card-shadow);
            border: 1px solid var(--border);
            transition: transform 0.3s;
        }

        .guidance-card:hover {
            transform: translateY(-5px);
            box-shadow: var(--hover-shadow);
        }

        .guidance-card h5 {
            color: var(--primary);
            margin-bottom: 12px;
            font-size: 1.1em;
        }

        .guidance-card p {
            color: var(--gray);
            font-size: 0.95em;
            line-height: 1.5;
        }

        /* Chatbot Widget */
        .chatbot-widget {
            position: fixed;
            bottom: 30px;
            right: 30px;
            z-index: 1000;
            font-family: 'Poppins', sans-serif;
        }

        .chatbot-button {
            width: 60px;
            height: 60px;
            border-radius: 50%;
            background: var(--primary);
            color: white;
            border: none;
            cursor: pointer;
            box-shadow: 0 8px 25px rgba(108, 99, 255, 0.4);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5em;
            transition: all 0.3s;
            position: relative;
        }

        .chatbot-button:hover {
            transform: scale(1.1);
            box-shadow: 0 12px 35px rgba(108, 99, 255, 0.5);
        }

        .chatbot-button .badge {
            position: absolute;
            top: -5px;
            right: -5px;
            background: var(--secondary);
            color: white;
            border-radius: 50%;
            width: 20px;
            height: 20px;
            font-size: 0.7em;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 700;
        }

        .chatbot-container {
            position: absolute;
            bottom: 80px;
            right: 0;
            width: 380px;
            height: 600px;
            background: white;
            border-radius: 20px;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
            display: none;
            flex-direction: column;
            overflow: hidden;
            border: 1px solid var(--border);
        }

        .chatbot-container.active {
            display: flex;
            animation: slideUp 0.3s ease;
        }

        @keyframes slideUp {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .chatbot-header {
            background: linear-gradient(135deg, var(--primary) 0%, var(--primary-dark) 100%);
            color: white;
            padding: 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .chatbot-header h4 {
            margin: 0;
            font-size: 1.2em;
            font-weight: 600;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .chatbot-close {
            background: rgba(255, 255, 255, 0.2);
            border: none;
            color: white;
            width: 30px;
            height: 30px;
            border-radius: 50%;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s;
        }

        .chatbot-close:hover {
            background: rgba(255, 255, 255, 0.3);
            transform: rotate(90deg);
        }

        .chatbot-messages {
            flex: 1;
            padding: 20px;
            overflow-y: auto;
            background: #f8f9fa;
            display: flex;
            flex-direction: column;
            gap: 15px;
        }

        .chatbot-message {
            max-width: 75%;
            padding: 12px 16px;
            border-radius: 18px;
            word-wrap: break-word;
            animation: fadeIn 0.3s ease;
        }

        .chatbot-message.user {
            background: var(--primary);
            color: white;
            align-self: flex-end;
            border-bottom-right-radius: 4px;
        }

        .chatbot-message.bot {
            background: white;
            color: var(--dark);
            align-self: flex-start;
            border-bottom-left-radius: 4px;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
        }

        .chatbot-input-container {
            padding: 15px;
            background: white;
            border-top: 1px solid var(--border);
            display: flex;
            gap: 10px;
        }

        .chatbot-input {
            flex: 1;
            padding: 12px 16px;
            border: 1px solid var(--border);
            border-radius: 25px;
            font-size: 0.95em;
            font-family: 'Poppins', sans-serif;
            outline: none;
        }

        .chatbot-input:focus {
            border-color: var(--primary);
            box-shadow: 0 0 0 3px rgba(108, 99, 255, 0.1);
        }

        .chatbot-send {
            width: 45px;
            height: 45px;
            border-radius: 50%;
            background: var(--primary);
            color: white;
            border: none;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s;
        }

        .chatbot-send:hover {
            background: var(--primary-dark);
            transform: scale(1.05);
        }

        /* Exam Selection Modal */
        .modal-overlay {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.6);
            z-index: 2000;
            backdrop-filter: blur(5px);
            align-items: center;
            justify-content: center;
        }

        .modal-overlay.active {
            display: flex;
            animation: fadeIn 0.3s ease;
        }

        .modal {
            background: white;
            border-radius: 20px;
            padding: 40px;
            max-width: 500px;
            width: 90%;
            max-height: 90vh;
            overflow-y: auto;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
            position: relative;
        }

        .modal-header {
            margin-bottom: 25px;
        }

        .modal-header h3 {
            color: var(--primary);
            font-size: 1.5em;
            margin-bottom: 10px;
        }

        .modal-header p {
            color: var(--gray);
        }

        .modal-close {
            position: absolute;
            top: 20px;
            right: 20px;
            background: transparent;
            border: none;
            font-size: 1.5em;
            color: var(--gray);
            cursor: pointer;
            width: 35px;
            height: 35px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s;
        }

        .modal-close:hover {
            background: rgba(108, 99, 255, 0.1);
            color: var(--primary);
        }

        .exam-options {
            display: grid;
            gap: 15px;
            margin-bottom: 25px;
        }

        .exam-option {
            padding: 20px;
            border: 2px solid var(--border);
            border-radius: 12px;
            cursor: pointer;
            transition: all 0.3s;
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .exam-option:hover {
            border-color: var(--primary);
            background: rgba(108, 99, 255, 0.05);
            transform: translateX(5px);
        }

        .exam-option.selected {
            border-color: var(--primary);
            background: rgba(108, 99, 255, 0.1);
        }

        .exam-option-icon {
            width: 50px;
            height: 50px;
            background: var(--primary);
            color: white;
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5em;
        }

        .exam-option-content h4 {
            margin: 0 0 5px 0;
            color: var(--dark);
            font-size: 1.1em;
        }

        .exam-option-content p {
            margin: 0;
            color: var(--gray);
            font-size: 0.9em;
        }

        .study-plan-result {
            background: white;
            padding: 30px;
            border-radius: 16px;
            margin-top: 25px;
            box-shadow: var(--card-shadow);
            border: 1px solid var(--border);
        }

        .study-plan-result h4 {
            color: var(--primary);
            margin-bottom: 20px;
            font-size: 1.3em;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .study-plan-content {
            line-height: 1.8;
            color: var(--dark);
        }

        .study-plan-content h5 {
            color: var(--primary);
            margin-top: 20px;
            margin-bottom: 10px;
            font-size: 1.1em;
        }

        .study-plan-content ul {
            margin-left: 20px;
            margin-bottom: 15px;
        }

        .study-plan-content li {
            margin-bottom: 8px;
        }

        /* Make guidance cards clickable */
        .guidance-card {
            cursor: pointer;
            position: relative;
        }

        .guidance-card:hover {
            transform: translateY(-8px);
            box-shadow: var(--hover-shadow);
            border-color: var(--primary-light);
        }

        .guidance-card::after {
            content: 'â†’';
            position: absolute;
            top: 20px;
            right: 20px;
            color: var(--primary);
            font-size: 1.5em;
            opacity: 0;
            transition: all 0.3s;
        }

        .guidance-card:hover::after {
            opacity: 1;
            transform: translateX(5px);
        }

        /* Responsive */
        @media (max-width: 768px) {
            .glass-container {
                padding: 30px 20px;
                margin: 20px 15px;
            }
            
            h1 {
                font-size: 2.2em;
            }

            .tabs {
                flex-direction: column;
            }

            .tab-btn {
                width: 100%;
                text-align: center;
                justify-content: center;
            }

            .upload-features {
                flex-direction: column;
                gap: 15px;
            }

            .upload-card {
                padding: 30px 20px;
            }

            .chatbot-container {
                width: calc(100% - 40px);
                height: calc(100vh - 100px);
                right: 20px;
                left: 20px;
                bottom: 80px;
            }

            .chatbot-widget {
                right: 20px;
                bottom: 20px;
            }

            .modal {
                padding: 30px 20px;
            }
        }
    </style>
</head>
<body>
    <!-- Main Container -->
    <div class="glass-container">
        <div class="header">
            <div class="logo">
                <div class="logo-icon">
                    <i class="fas fa-graduation-cap"></i>
                </div>
            </div>
            <h1>Find Your Perfect Scholarship</h1>
            <p class="subtitle">AI-powered platform to discover scholarships that match your profile and aspirations</p>
        </div>

        <div class="tabs-container">
            <!-- Tab Buttons -->
            <div class="tabs">
                <button class="tab-btn active" data-tab="document">
                    <i class="fas fa-file-upload"></i> Document Scan
                </button>
                <button class="tab-btn" data-tab="manual">
                    <i class="fas fa-user-edit"></i> Manual Entry
                </button>
                <button class="tab-btn" data-tab="exam">
                    <i class="fas fa-book-open"></i> Exam Information
                </button>
                <button class="tab-btn" data-tab="guidance">
                    <i class="fas fa-hands-helping"></i> Application Guidance
                </button>
            </div>

            <!-- Tab Contents -->
            <div id="document-tab" class="tab-content active">
                <div class="upload-card" onclick="document.getElementById('document-upload').click()">
                    <div class="upload-icon">
                        <i class="fas fa-cloud-upload-alt"></i>
                    </div>
                    <div class="upload-text">Upload Your Academic Documents</div>
                    <div class="upload-subtext">Drag & drop or click to upload marksheets, income certificates, or ID proofs</div>
                    <div class="upload-features">
                        <div class="upload-feature">
                            <i class="fas fa-shield-alt feature-icon"></i>
                            <span>Secure & Private</span>
                        </div>
                        <div class="upload-feature">
                            <i class="fas fa-bolt feature-icon"></i>
                            <span>Instant Processing</span>
                        </div>
                        <div class="upload-feature">
                            <i class="fas fa-robot feature-icon"></i>
                            <span>AI-Powered Analysis</span>
                        </div>
                    </div>
                    <input type="file" id="document-upload" accept="image/*,.pdf">
                </div>
            </div>

            <div id="manual-tab" class="tab-content">
                <div class="form-grid">
                    <div class="form-group">
                        <label for="name">
                            <i class="fas fa-user input-icon"></i> Full Name
                        </label>
                        <input type="text" id="name" placeholder="Enter your full name">
                    </div>
                    <div class="form-group">
                        <label for="percentage">
                            <i class="fas fa-chart-line input-icon"></i> Academic Percentage
                        </label>
                        <input type="number" id="percentage" placeholder="85.5" step="0.01" min="0" max="100">
                    </div>
                    <div class="form-group">
                        <label for="income">
                            <i class="fas fa-rupee-sign input-icon"></i> Annual Family Income (â‚¹)
                        </label>
                        <input type="number" id="income" placeholder="180000">
                    </div>
                    <div class="form-group">
                        <label for="category">
                            <i class="fas fa-tag input-icon"></i> Category
                        </label>
                        <select id="category">
                            <option value="">Select Category</option>
                            <option value="General">General</option>
                            <option value="OBC">OBC</option>
                            <option value="SC">SC</option>
                            <option value="ST">ST</option>
                            <option value="Minority">Minority</option>
                            <option value="EWS">Economically Weaker Section</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="stream">
                            <i class="fas fa-graduation-cap input-icon"></i> Education Stream
                        </label>
                        <select id="stream">
                            <option value="">Select Stream</option>
                            <option value="Science">Science</option>
                            <option value="Commerce">Commerce</option>
                            <option value="Arts">Arts</option>
                            <option value="Engineering">Engineering</option>
                            <option value="Medical">Medical</option>
                            <option value="Other">Other</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="state">
                            <i class="fas fa-map-marker-alt input-icon"></i> State of Residence
                        </label>
                        <select id="state">
                            <option value="">Select State</option>
                            <option value="Delhi">Delhi</option>
                            <option value="Maharashtra">Maharashtra</option>
                            <option value="Karnataka">Karnataka</option>
                            <option value="Tamil Nadu">Tamil Nadu</option>
                            <option value="Uttar Pradesh">Uttar Pradesh</option>
                            <option value="Other">Other</option>
                        </select>
                    </div>
                </div>
                <button class="btn btn-primary btn-block" id="manual-submit-btn">
                    <i class="fas fa-search"></i> Find Matching Scholarships
                </button>
            </div>

            <div id="exam-tab" class="tab-content">
                <div id="exams-content"></div>
            </div>

            <div id="guidance-tab" class="tab-content">
                <div class="student-data-card">
                    <h3><i class="fas fa-road"></i> Application Guidance</h3>
                    <p>Select the type of guidance you need:</p>
                    <div class="form-group" style="margin-top: 20px;">
                        <select id="guidance-type" style="width: 100%; max-width: 400px;">
                            <option value="">Select Guidance Type</option>
                            <option value="scholarship">Scholarship Application Process</option>
                            <option value="exam">Exam Preparation Strategy</option>
                            <option value="documents">Required Documents Checklist</option>
                            <option value="interview">Interview Preparation</option>
                        </select>
                    </div>
                    <div id="guidance-content" style="margin-top: 30px;"></div>
                </div>
            </div>
        </div>

        <!-- Results Section -->
        <div id="results"></div>
    </div>

    <!-- Chatbot Widget -->
    <div class="chatbot-widget">
        <button class="chatbot-button" id="chatbot-toggle">
            <i class="fas fa-comments"></i>
        </button>
        <div class="chatbot-container" id="chatbot-container">
            <div class="chatbot-header">
                <h4><i class="fas fa-robot"></i> Study Assistant</h4>
                <button class="chatbot-close" id="chatbot-close">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="chatbot-messages" id="chatbot-messages">
                <div class="chatbot-message bot">
                    ðŸ‘‹ Hi! I'm your study assistant. I can help you with:
                    <br><br>
                    â€¢ Scholarship information<br>
                    â€¢ Exam preparation tips<br>
                    â€¢ Document requirements<br>
                    â€¢ Application guidance<br><br>
                    How can I help you today?
                </div>
            </div>
            <div class="chatbot-input-container">
                <input type="text" class="chatbot-input" id="chatbot-input" placeholder="Type your message...">
                <button class="chatbot-send" id="chatbot-send">
                    <i class="fas fa-paper-plane"></i>
                </button>
            </div>
        </div>
    </div>

    <!-- Exam Selection Modal -->
    <div class="modal-overlay" id="exam-modal">
        <div class="modal">
            <button class="modal-close" id="modal-close">
                <i class="fas fa-times"></i>
            </button>
            <div class="modal-header">
                <h3 id="modal-title">Select Your Exam</h3>
                <p id="modal-subtitle">Choose the exam you're preparing for</p>
            </div>
            <div class="exam-options" id="exam-options">
                <!-- Will be populated by JavaScript -->
            </div>
            <button class="btn btn-primary btn-block" id="generate-plan-btn" style="display: none;">
                <i class="fas fa-magic"></i> Generate Study Plan
            </button>
            <div id="study-plan-result"></div>
        </div>
    </div>

    <script>
        const API_URL = 'http://localhost:5000';
        let currentTab = 'document';  // Default tab
        let currentLanguage = 'en';

        // Initialize on page load
        document.addEventListener('DOMContentLoaded', function() {
            console.log('Page loaded, initializing...');
            
            // Set default active tab
            switchTab('document');
            
            // Load initial data
            loadDashboardStats();
            
            // Attach event listeners
            attachEventListeners();
        });

        // Attach event listeners
        function attachEventListeners() {
            // Tab buttons
            document.querySelectorAll('.tab-btn').forEach(btn => {
                btn.addEventListener('click', function() {
                    const tabName = this.getAttribute('data-tab');
                    switchTab(tabName);
                });
            });
            
            // File upload
            const fileInput = document.getElementById('document-upload');
            if (fileInput) {
                fileInput.addEventListener('change', handleDocumentUpload);
            }
            
            // Manual submit button
            const manualBtn = document.getElementById('manual-submit-btn');
            if (manualBtn) {
                manualBtn.addEventListener('click', handleManualSubmit);
            }
            
            // Guidance type selector
            const guidanceSelect = document.getElementById('guidance-type');
            if (guidanceSelect) {
                guidanceSelect.addEventListener('change', function() {
                    loadGuidance(this.value);
                });
            }
            
            // Drag and drop for upload zone
            const uploadCard = document.querySelector('.upload-card');
            if (uploadCard) {
                uploadCard.addEventListener('dragover', function(e) {
                    e.preventDefault();
                    this.classList.add('dragover');
                });
                
                uploadCard.addEventListener('dragleave', function() {
                    this.classList.remove('dragover');
                });
                
                uploadCard.addEventListener('drop', function(e) {
                    e.preventDefault();
                    this.classList.remove('dragover');
                    const files = e.dataTransfer.files;
                    if (files.length > 0) {
                        document.getElementById('document-upload').files = files;
                        handleDocumentUpload({ target: { files: files } });
                    }
                });
            }
        }

        // Tab Switching Function
        function switchTab(tabName) {
            console.log('Switching to tab:', tabName);
            
            // Remove active class from all tabs
            document.querySelectorAll('.tab-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            
            // Hide all tab contents
            document.querySelectorAll('.tab-content').forEach(content => {
                content.classList.remove('active');
            });
            
            // Add active class to clicked tab
            const activeButton = document.querySelector(`[data-tab="${tabName}"]`);
            if (activeButton) {
                activeButton.classList.add('active');
            }
            
            // Show selected tab content
            const activeContent = document.getElementById(`${tabName}-tab`);
            if (activeContent) {
                activeContent.classList.add('active');
            }
            
            currentTab = tabName;
            
            // Load tab-specific data
            if (tabName === 'exam') {
                loadExams();
            } else if (tabName === 'guidance') {
                // Guidance loads on demand
            }
        }

        // Load Dashboard Statistics
        async function loadDashboardStats() {
            try {
                // This would typically fetch from your API
                // For demo purposes, we'll use mock data
                const mockStats = {
                    total_scholarships: 15234,
                    total_amount: 1250000000,
                    urgent_deadlines: 23
                };
                
                updateDashboardCards(mockStats);
            } catch (error) {
                console.error('Dashboard stats error:', error);
            }
        }

        function updateDashboardCards(stats) {
            // Update if dashboard elements exist
            // This is just a placeholder for when we add a dashboard
            console.log('Dashboard stats:', stats);
        }

        // Document Upload Handler
        async function handleDocumentUpload(event) {
            const file = event.target.files[0];
            if (!file) return;
            
            // Show loading
            showLoading('Scanning document...');
            
            const formData = new FormData();
            formData.append('file', file);
            
            try {
                const response = await fetch(`${API_URL}/upload`, {
                    method: 'POST',
                    body: formData
                });

                const data = await response.json();
                hideLoading();

                if (data.success) {
                    displayResults(data);
                } else {
                    showError(data.error || 'Failed to process document. Please try again.');
                }
                
            } catch (error) {
                hideLoading();
                showError('Connection error. Make sure backend is running on port 5000.');
                console.error('Upload error:', error);
            }
        }

        // Manual Entry Handler
        async function handleManualSubmit() {
            const formData = {
                name: document.getElementById('name')?.value,
                percentage: parseFloat(document.getElementById('percentage')?.value),
                income: parseInt(document.getElementById('income')?.value),
                category: document.getElementById('category')?.value,
                stream: document.getElementById('stream')?.value,
                state: document.getElementById('state')?.value
            };
            
            // Validation
            if (!formData.percentage || !formData.income || !formData.category) {
                alert('Please fill all required fields (Percentage, Income, Category)');
                return;
            }
            
            showLoading('Finding scholarships...');
            
            try {
                const response = await fetch(`${API_URL}/manual`, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify(formData)
                });

                const data = await response.json();
                hideLoading();

                if (data.success) {
                    displayResults(data);
                } else {
                    showError(data.error || 'Failed to find scholarships. Please try again.');
                }
                
            } catch (error) {
                hideLoading();
                showError('Connection error. Make sure backend is running on port 5000.');
                console.error('Manual entry error:', error);
            }
        }

        // Display Results
        function displayResults(data) {
            const resultsDiv = document.getElementById('results');
            if (!resultsDiv) return;
            
            let html = '<div class="results-container">';
            
            // Statistics
            if (data.statistics) {
                html += `
                    <div class="stats-summary">
                        <div class="stat-card">
                            <h3>${data.total_matches}</h3>
                            <p>Matches Found</p>
                        </div>
                        <div class="stat-card">
                            <h3>â‚¹${data.statistics.total_amount.toLocaleString('en-IN')}</h3>
                            <p>Total Potential</p>
                        </div>
                        <div class="stat-card">
                            <h3>â‚¹${data.statistics.highest_amount?.toLocaleString('en-IN') || '0'}</h3>
                            <p>Highest Amount</p>
                        </div>
                    </div>
                `;
            }
            
            // Student Data
            if (data.student_data) {
                html += `
                    <div class="student-data-card">
                        <h3><i class="fas fa-user-graduate"></i> Your Information</h3>
                        <div class="data-grid">
                            ${data.student_data.name ? `<p><strong>Name:</strong> ${data.student_data.name}</p>` : ''}
                            <p><strong>Percentage:</strong> ${data.student_data.percentage?.toFixed(1)}%</p>
                            <p><strong>Income:</strong> â‚¹${data.student_data.income?.toLocaleString('en-IN')}</p>
                            <p><strong>Category:</strong> ${data.student_data.category}</p>
                            ${data.student_data.stream ? `<p><strong>Stream:</strong> ${data.student_data.stream}</p>` : ''}
                            ${data.student_data.state ? `<p><strong>State:</strong> ${data.student_data.state}</p>` : ''}
                        </div>
                    </div>
                `;
            }
            
            // Scholarships
            if (data.matched_scholarships && data.matched_scholarships.length > 0) {
                html += '<div class="scholarships-list">';
                
                data.matched_scholarships.forEach(scholarship => {
                    html += `
                        <div class="scholarship-card">
                            <div class="scholarship-header">
                                <h3>${scholarship.name}</h3>
                                <span class="amount">â‚¹${scholarship.amount.toLocaleString('en-IN')}</span>
                            </div>
                            <p class="description">${scholarship.description}</p>
                            <div class="scholarship-details">
                                <span>Min: ${scholarship.min_percentage}%</span>
                                <span>Income: â‚¹${scholarship.max_income.toLocaleString('en-IN')}</span>
                                <span>Deadline: ${scholarship.deadline}</span>
                                ${scholarship.match_percentage ? `<span style="background: rgba(76, 175, 80, 0.1); color: #4CAF50; font-weight: 600;">Match: ${scholarship.match_percentage}%</span>` : ''}
                            </div>
                            ${scholarship.apply_url ? `
                                <a href="${scholarship.apply_url}" target="_blank" class="apply-btn">
                                    Apply Now <i class="fas fa-arrow-right"></i>
                                </a>
                            ` : ''}
                        </div>
                    `;
                });
                
                html += '</div>';
            } else {
                html += '<div class="no-results">No matching scholarships found</div>';
            }
            
            html += '</div>';
            resultsDiv.innerHTML = html;
        }

        // Load Exams
        async function loadExams() {
            const content = document.getElementById('exams-content');
            if (!content) return;
            
            content.innerHTML = '<div class="loading">Loading exams...</div>';
            
            try {
                const response = await fetch(`${API_URL}/exams`);
                const data = await response.json();

                if (data.success && data.exams) {
                    let html = '';
                    data.exams.forEach(exam => {
                        html += `
                            <div class="exam-card">
                                <h3>${exam.name} - ${exam.full_name}</h3>
                                <p><strong>Conducting Body:</strong> ${exam.conducting_body}</p>
                                <p><strong>Exam Date:</strong> ${exam.exam_date}</p>
                                <p><strong>Min Percentage:</strong> ${exam.eligibility.min_percentage}%</p>
                                <p><strong>Subjects:</strong> ${Array.isArray(exam.eligibility.subjects) ? exam.eligibility.subjects.join(', ') : exam.eligibility.subjects}</p>
                                ${exam.application_url ? `
                                    <a href="${exam.application_url}" target="_blank" class="apply-btn">
                                        Apply for ${exam.name} <i class="fas fa-arrow-right"></i>
                                    </a>
                                ` : ''}
                            </div>
                        `;
                    });
                    content.innerHTML = html;
                } else {
                    content.innerHTML = '<div class="error-message">Failed to load exams</div>';
                }
                
            } catch (error) {
                content.innerHTML = '<div class="error-message">Failed to load exams. Make sure backend is running.</div>';
                console.error('Exams error:', error);
            }
        }

        // Load Guidance
        async function loadGuidance(type) {
            const content = document.getElementById('guidance-content');
            if (!content) return;
            
            if (!type) {
                content.innerHTML = '<p>Please select a guidance type to continue.</p>';
                return;
            }
            
            content.innerHTML = '<div class="loading">Loading guidance...</div>';
            
            try {
                // In a real implementation, this would be an actual API call
                // For demo, we'll simulate a response after a delay
                setTimeout(() => {
                    let guidanceHtml = '';
                    
                    if (type === 'scholarship') {
                        guidanceHtml = `
                            <h4>Scholarship Application Process</h4>
                            <div class="guidance-grid">
                                <div class="guidance-card">
                                    <h5>Step 1: Research</h5>
                                    <p>Identify scholarships that match your profile and eligibility criteria.</p>
                                </div>
                                <div class="guidance-card">
                                    <h5>Step 2: Prepare Documents</h5>
                                    <p>Gather all required documents - marksheets, income certificates, ID proofs.</p>
                                </div>
                                <div class="guidance-card">
                                    <h5>Step 3: Fill Application</h5>
                                    <p>Complete the application form carefully with accurate information.</p>
                                </div>
                                <div class="guidance-card">
                                    <h5>Step 4: Submit & Follow Up</h5>
                                    <p>Submit before deadline and keep track of your application status.</p>
                                </div>
                            </div>
                        `;
                    } else if (type === 'exam') {
                        guidanceHtml = `
                            <h4>Exam Preparation Strategy</h4>
                            <div class="guidance-grid">
                                <div class="guidance-card" data-strategy="study-plan">
                                    <h5><i class="fas fa-calendar-check"></i> Create Study Plan</h5>
                                    <p>Get a personalized study schedule covering all subjects and topics for your exam.</p>
                                </div>
                                <div class="guidance-card" data-strategy="practice">
                                    <h5><i class="fas fa-book-open"></i> Practice Regularly</h5>
                                    <p>Get a practice routine with previous years' papers and mock test schedule.</p>
                                </div>
                                <div class="guidance-card" data-strategy="weak-areas">
                                    <h5><i class="fas fa-chart-line"></i> Focus on Weak Areas</h5>
                                    <p>Get strategies to identify and strengthen your weak topics effectively.</p>
                                </div>
                                <div class="guidance-card" data-strategy="revision">
                                    <h5><i class="fas fa-redo"></i> Revision Strategy</h5>
                                    <p>Get a complete revision plan to cover all topics before the exam.</p>
                                </div>
                                <div class="guidance-card" data-strategy="time-management">
                                    <h5><i class="fas fa-clock"></i> Time Management</h5>
                                    <p>Learn effective time management techniques for exam preparation.</p>
                                </div>
                                <div class="guidance-card" data-strategy="stress-management">
                                    <h5><i class="fas fa-heart"></i> Stress Management</h5>
                                    <p>Get tips to manage exam stress and maintain mental well-being.</p>
                                </div>
                            </div>
                        `;
                        
                        // Attach click handlers after content is loaded
                        setTimeout(() => {
                            attachGuidanceCardListeners();
                        }, 100);
                    } else {
                        guidanceHtml = `<p>Guidance content for ${type} will be displayed here.</p>`;
                    }
                    
                    content.innerHTML = guidanceHtml;
                }, 1000);
                
            } catch (error) {
                content.innerHTML = '<div class="error-message">Failed to load guidance</div>';
                console.error('Guidance error:', error);
            }
        }

        // Helper Functions
        function showLoading(message) {
            const resultsDiv = document.getElementById('results');
            if (resultsDiv) {
                resultsDiv.innerHTML = `
                    <div class="loading">
                        <div class="spinner"></div>
                        <p>${message}</p>
                    </div>
                `;
            }
        }

        function hideLoading() {
            // Loading will be replaced by results
        }

        function showError(message) {
            const resultsDiv = document.getElementById('results');
            if (resultsDiv) {
                resultsDiv.innerHTML = `
                    <div class="error-message">
                        <i class="fas fa-exclamation-circle"></i> ${message}
                    </div>
                `;
            }
        }

        // Chatbot Functionality
        let selectedExam = null;
        let currentStrategy = null;

        function initChatbot() {
            const toggleBtn = document.getElementById('chatbot-toggle');
            const closeBtn = document.getElementById('chatbot-close');
            const container = document.getElementById('chatbot-container');
            const sendBtn = document.getElementById('chatbot-send');
            const input = document.getElementById('chatbot-input');

            if (toggleBtn) {
                toggleBtn.addEventListener('click', () => {
                    container.classList.toggle('active');
                });
            }

            if (closeBtn) {
                closeBtn.addEventListener('click', () => {
                    container.classList.remove('active');
                });
            }

            const sendMessage = () => {
                const message = input.value.trim();
                if (!message) return;

                addChatMessage(message, 'user');
                input.value = '';

                // Send to backend
                sendChatbotQuery(message);
            };

            if (sendBtn) {
                sendBtn.addEventListener('click', sendMessage);
            }

            if (input) {
                input.addEventListener('keypress', (e) => {
                    if (e.key === 'Enter') {
                        sendMessage();
                    }
                });
            }
        }

        function addChatMessage(text, type) {
            const messagesDiv = document.getElementById('chatbot-messages');
            if (!messagesDiv) return;

            const messageDiv = document.createElement('div');
            messageDiv.className = `chatbot-message ${type}`;
            messageDiv.textContent = text;
            messagesDiv.appendChild(messageDiv);
            messagesDiv.scrollTop = messagesDiv.scrollHeight;
        }

        async function sendChatbotQuery(query) {
            try {
                const response = await fetch(`${API_URL}/chatbot`, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify({
                        query: query,
                        user_id: 'default',
                        language: currentLanguage
                    })
                });

                const data = await response.json();
                if (data.success) {
                    // Format the response (handle markdown-like formatting)
                    let formattedResponse = data.response;
                    formattedResponse = formattedResponse.replace(/\*\*(.*?)\*\*/g, '<strong>$1</strong>');
                    formattedResponse = formattedResponse.replace(/\*(.*?)\*/g, '<em>$1</em>');
                    formattedResponse = formattedResponse.replace(/\n/g, '<br>');

                    const messagesDiv = document.getElementById('chatbot-messages');
                    const messageDiv = document.createElement('div');
                    messageDiv.className = 'chatbot-message bot';
                    messageDiv.innerHTML = formattedResponse;
                    messagesDiv.appendChild(messageDiv);
                    messagesDiv.scrollTop = messagesDiv.scrollHeight;
                } else {
                    addChatMessage('Sorry, I encountered an error. Please try again.', 'bot');
                }
            } catch (error) {
                console.error('Chatbot error:', error);
                addChatMessage('Unable to connect. Please make sure the backend is running.', 'bot');
            }
        }

        // Exam Selection Modal
        function initExamModal() {
            const modal = document.getElementById('exam-modal');
            const closeBtn = document.getElementById('modal-close');
            const generateBtn = document.getElementById('generate-plan-btn');

            if (closeBtn) {
                closeBtn.addEventListener('click', () => {
                    modal.classList.remove('active');
                    selectedExam = null;
                    currentStrategy = null;
                });
            }

            if (modal) {
                modal.addEventListener('click', (e) => {
                    if (e.target === modal) {
                        modal.classList.remove('active');
                        selectedExam = null;
                        currentStrategy = null;
                    }
                });
            }

            if (generateBtn) {
                generateBtn.addEventListener('click', () => {
                    if (selectedExam && currentStrategy) {
                        generateStudyPlan(selectedExam, currentStrategy);
                    }
                });
            }
        }

        function attachGuidanceCardListeners() {
            document.querySelectorAll('.guidance-card[data-strategy]').forEach(card => {
                card.addEventListener('click', function() {
                    const strategy = this.getAttribute('data-strategy');
                    openExamModal(strategy);
                });
            });
        }

        function openExamModal(strategy) {
            currentStrategy = strategy;
            const modal = document.getElementById('exam-modal');
            const modalTitle = document.getElementById('modal-title');
            const modalSubtitle = document.getElementById('modal-subtitle');
            const examOptions = document.getElementById('exam-options');
            const generateBtn = document.getElementById('generate-plan-btn');
            const resultDiv = document.getElementById('study-plan-result');

            // Set modal title based on strategy
            const strategyNames = {
                'study-plan': 'Create Study Plan',
                'practice': 'Practice Schedule',
                'weak-areas': 'Weak Areas Strategy',
                'revision': 'Revision Strategy',
                'time-management': 'Time Management',
                'stress-management': 'Stress Management'
            };

            modalTitle.textContent = strategyNames[strategy] || 'Select Your Exam';
            modalSubtitle.textContent = 'Choose the exam you\'re preparing for to get personalized guidance';

            // Load exams
            loadExamsForModal(examOptions);

            // Show modal
            modal.classList.add('active');
            generateBtn.style.display = 'none';
            resultDiv.innerHTML = '';
        }

        async function loadExamsForModal(container) {
            container.innerHTML = '<div class="loading">Loading exams...</div>';

            try {
                const response = await fetch(`${API_URL}/exams`);
                const data = await response.json();

                if (data.success && data.exams) {
                    let html = '';
                    data.exams.forEach(exam => {
                        html += `
                            <div class="exam-option" data-exam-id="${exam.id}" data-exam-name="${exam.name}">
                                <div class="exam-option-icon">
                                    ${exam.name.includes('JEE') ? 'ðŸŽ¯' : exam.name.includes('NEET') ? 'ðŸ©º' : 'ðŸŽ“'}
                                </div>
                                <div class="exam-option-content">
                                    <h4>${exam.name}</h4>
                                    <p>${exam.full_name} - ${exam.exam_date}</p>
                                </div>
                            </div>
                        `;
                    });

                    container.innerHTML = html;

                    // Attach click handlers
                    container.querySelectorAll('.exam-option').forEach(option => {
                        option.addEventListener('click', function() {
                            // Remove previous selection
                            container.querySelectorAll('.exam-option').forEach(opt => {
                                opt.classList.remove('selected');
                            });

                            // Select this option
                            this.classList.add('selected');
                            selectedExam = {
                                id: this.getAttribute('data-exam-id'),
                                name: this.getAttribute('data-exam-name')
                            };

                            // Show generate button
                            document.getElementById('generate-plan-btn').style.display = 'block';
                        });
                    });
                } else {
                    // Fallback to mock data
                    const mockExams = [
                        { id: 1, name: 'JEE Main', full_name: 'Joint Entrance Examination', exam_date: 'Jan & Apr 2026' },
                        { id: 2, name: 'NEET UG', full_name: 'National Eligibility cum Entrance Test', exam_date: 'May 2026' },
                        { id: 3, name: 'CUET UG', full_name: 'Common University Entrance Test', exam_date: 'May 2026' }
                    ];

                    let html = '';
                    mockExams.forEach(exam => {
                        html += `
                            <div class="exam-option" data-exam-id="${exam.id}" data-exam-name="${exam.name}">
                                <div class="exam-option-icon">
                                    ${exam.name.includes('JEE') ? 'ðŸŽ¯' : exam.name.includes('NEET') ? 'ðŸ©º' : 'ðŸŽ“'}
                                </div>
                                <div class="exam-option-content">
                                    <h4>${exam.name}</h4>
                                    <p>${exam.full_name} - ${exam.exam_date}</p>
                                </div>
                            </div>
                        `;
                    });

                    container.innerHTML = html;

                    container.querySelectorAll('.exam-option').forEach(option => {
                        option.addEventListener('click', function() {
                            container.querySelectorAll('.exam-option').forEach(opt => {
                                opt.classList.remove('selected');
                            });
                            this.classList.add('selected');
                            selectedExam = {
                                id: this.getAttribute('data-exam-id'),
                                name: this.getAttribute('data-exam-name')
                            };
                            document.getElementById('generate-plan-btn').style.display = 'block';
                        });
                    });
                }
            } catch (error) {
                console.error('Error loading exams:', error);
                container.innerHTML = '<div class="error-message">Failed to load exams. Using default options.</div>';
            }
        }

        async function generateStudyPlan(exam, strategy) {
            const resultDiv = document.getElementById('study-plan-result');
            resultDiv.innerHTML = '<div class="loading">Generating your study plan...</div>';

            try {
                const response = await fetch(`${API_URL}/generate-study-plan`, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify({
                        exam_id: exam.id,
                        exam_name: exam.name,
                        strategy_type: strategy
                    })
                });

                const data = await response.json();
                if (data.success) {
                    resultDiv.innerHTML = `
                        <div class="study-plan-result">
                            <h4><i class="fas fa-calendar-check"></i> Your ${data.strategy_name} for ${exam.name}</h4>
                            <div class="study-plan-content">
                                ${formatStudyPlan(data.study_plan)}
                            </div>
                        </div>
                    `;
                } else {
                    resultDiv.innerHTML = '<div class="error-message">Failed to generate study plan. Please try again.</div>';
                }
            } catch (error) {
                console.error('Error generating study plan:', error);
                resultDiv.innerHTML = '<div class="error-message">Unable to connect. Please make sure the backend is running.</div>';
            }
        }

        function formatStudyPlan(plan) {
            if (typeof plan === 'string') {
                // Convert markdown-like formatting to HTML
                let formatted = plan;
                formatted = formatted.replace(/\*\*(.*?)\*\*/g, '<strong>$1</strong>');
                formatted = formatted.replace(/\*(.*?)\*/g, '<em>$1</em>');
                formatted = formatted.replace(/\n\n/g, '</p><p>');
                formatted = formatted.replace(/\n/g, '<br>');
                formatted = formatted.replace(/### (.*?)(<br>|$)/g, '<h5>$1</h5>');
                formatted = formatted.replace(/## (.*?)(<br>|$)/g, '<h5>$1</h5>');
                formatted = formatted.replace(/^\d+\.\s+(.*?)$/gm, '<li>$1</li>');
                formatted = formatted.replace(/^- (.*?)$/gm, '<li>$1</li>');
                return '<p>' + formatted + '</p>';
            }
            return '<p>' + JSON.stringify(plan) + '</p>';
        }

        // Initialize everything on page load
        document.addEventListener('DOMContentLoaded', function() {
            initChatbot();
            initExamModal();
        });
    </script>
</body>
</html>